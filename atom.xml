<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CHENG KANG</title>
  <subtitle>Hello World Anyway</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://cheng-kang.github.io/"/>
  <updated>2016-03-23T20:35:45.000Z</updated>
  <id>http://cheng-kang.github.io/</id>
  
  <author>
    <name>程康·Ant</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AutoLayout：constraint active 和 UITableView 加载第一屏 cell 样式不正常的解决方法（九宫格再续）</title>
    <link href="http://cheng-kang.github.io/2016/03/23/AutoLayout%EF%BC%9Aconstraint%20active%20%E5%92%8C%20UITableView%20%E5%8A%A0%E8%BD%BD%E7%AC%AC%E4%B8%80%E5%B1%8F%20cell%20%E6%A0%B7%E5%BC%8F%E4%B8%8D%E6%AD%A3%E5%B8%B8%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%88%E4%B9%9D%E5%AE%AB%E6%A0%BC%E5%86%8D%E7%BB%AD%EF%BC%89/"/>
    <id>http://cheng-kang.github.io/2016/03/23/AutoLayout：constraint active 和 UITableView 加载第一屏 cell 样式不正常的解决方法（九宫格再续）/</id>
    <published>2016-03-23T20:32:15.000Z</published>
    <updated>2016-03-23T20:35:45.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;多余的空白部分怎么办？&quot;&gt;&lt;a href=&quot;#多余的空白部分怎么办？&quot; class=&quot;headerlink&quot; title=&quot;多余的空白部分怎么办？&quot;&gt;&lt;/a&gt;多余的空白部分怎么办？&lt;/h3&gt;&lt;p&gt;我用上一篇文章提到的更优方案修改了模拟微博的项目。&lt;/p&gt;
&lt;p&gt;运行结果是这样的：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-23%20at%205.51.02%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;？？？说好的解决了问题呢？？？&lt;br&gt;为什么图片被拉伸了？？？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题何在?&lt;/strong&gt;&lt;br&gt;回想一下，在之前的测试项目中，我没有给 button panel 设置底部和 superview 的约束，只是设定了固定高和上方与图片之间的约束，所以 button panel 飘上去了。而且由于 storyboard 里面约束设置不全面（superview 的底部没有与其中的 subview 建立约束），所以使用&lt;code&gt;estimatedHeightForRowAtIndexPath&lt;/code&gt;的时候，整个 cell 都挤在了一起。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-23%20at%208.29.38%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;要使用&lt;code&gt;estimatedHeightForRowAtIndexPath&lt;/code&gt;，一定得将约束设置全面。这个我以后再研究。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;而在模拟微博项目中，我设置了 3-button-panel 和 superview 底部的约束（实际不是它们俩之间的约束，具体我应该会在另一篇文章来说，关于如何添加 cell 之间的空白。），约束设置全面了，3-button-panel 因此没有往上飘，而是 onePic 因为和 3-button-panel 之间的 8px 间距约束高度被拉伸。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;怎么办？&lt;/strong&gt;&lt;br&gt;上一次我学到了&lt;code&gt;constraint.priority&lt;/code&gt;的用法。于是我想，是不是因为 onePic 高度约束优先级没有 onePic 和 3-button-panel 间距优先级高。&lt;/p&gt;
&lt;p&gt;然后我添加了这一段代码：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@IBOutlet weak var onePicHeight: NSLayoutConstraint!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;buttonPanelAndOnePicConstraint.priority = firstPic.hidden ? 999 : 250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;onePicHeight.priority = 1000&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;就是当 onePic 出现的时候，将间距约束优先级设置为 999，而高度约束优先级设为 1000。结果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-23%20at%206.07.21%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;图片高度正常了。但是，onePic 和 3-button-panel 间距不正常了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题何在??&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我又想起来之前提到的&lt;strong&gt;hidden 只是隐身、不可见，不是完全消失&lt;/strong&gt;。&lt;br&gt;当显示 onePic 的时候，虽然九宫格的九张图全部设置为 hidden，它们仍然占着 superview 中的位置。因此出现了多余的间距。&lt;br&gt;然后我看到 StackOverflow 上面这个回答： &lt;a href=&quot;http://stackoverflow.com/questions/32218495/enable-disable-auto-layout-constraints&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《enable-disable-auto-layout-constraints》&lt;/a&gt;，知道了&lt;code&gt;constraint.active&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;constraint-active&quot;&gt;&lt;a href=&quot;#constraint-active&quot; class=&quot;headerlink&quot; title=&quot;constraint active&quot;&gt;&lt;/a&gt;constraint active&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/AppKit/Reference/NSLayoutConstraint_Class/#//apple_ref/occ/instp/NSLayoutConstraint/active&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NSLayoutConstraint: active&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;constraint.active&lt;/code&gt;对解决这个问题有什么帮助呢？&lt;/p&gt;
&lt;p&gt;当我们用 AutoLayout 的时候，我们设置了各种约束，然后屏幕中的各种 view 按照约束被渲染出来。当 view 被隐藏时，约束并没有消失。因此隐藏的 view 仍占在之前的位置上。&lt;br&gt;而如果我们把这个 view 上绑定的所有约束都注销，它和其他 view 就没有关系了，也就不会继续占位。&lt;/p&gt;
&lt;p&gt;所以要解决多余间距，我添加了这段代码：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;//当第七张图隐藏的时候，把第七、八、九张图的约束全部注销。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//当然更全面的做法是把九宫格的所有图片的约束都注销。此处因为实际情况我可以偷个懒。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if seventhPic.hidden &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    seventhPicLeft.active = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    seventhPicTop.active = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    eighthPicLeft.active = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    eighthPicTop.active = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ninethPicLeft.active = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ninethPicTop.active = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行看一看：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-23%20at%206.30.24%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;0.0!!! 没有用吗？&lt;br&gt;往下滑一滑，发现！诶！下面的是正常的。再滑回去，第一个也正常了！&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-23%20at%206.31.39%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;这说明刚才对问题的理解是正确的，解决方案也是正确的，只是存在一个小小的缺陷。&lt;/p&gt;
&lt;h3 id=&quot;如何解决：UITableView-加载第一屏-cell-样式不正常&quot;&gt;&lt;a href=&quot;#如何解决：UITableView-加载第一屏-cell-样式不正常&quot; class=&quot;headerlink&quot; title=&quot;如何解决：UITableView 加载第一屏 cell 样式不正常&quot;&gt;&lt;/a&gt;如何解决：UITableView 加载第一屏 cell 样式不正常&lt;/h3&gt;&lt;p&gt;我在 StackOverflow 找到有人遇到相同的问题，部分问题描述是这样的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This works nicely for the cells that have yet to be scrolled to (as UITableViewAutomaticDimention is called upon scrolling to the cell) and all is well for those, &lt;strong&gt;but not for the cells that are initially rendered onscreen after loading the data&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That’s the problem.&lt;br&gt;And how to solve that!!!&lt;/p&gt;
&lt;p&gt;我尝试了问题回答里面的所有方法都没有用。最后受提问者自己的回答（他提供了一种方法解决了自己的问题）启发，解决了问题 ：D。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解决方法&lt;/strong&gt;是这样的：&lt;br&gt;在包含 UITableView 的 ViewController 中重写方法&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidAppear(animated: Bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	tableView.reloadData()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解释&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我觉得滑屏加载新的 cell 的时候，应该是在调用&lt;code&gt;reloadData()&lt;/code&gt;（这里具体我还没探究清楚）或者加载部分 tableView 的 data。&lt;br&gt;当你滑屏的时候，其实就是在&lt;code&gt;viewDidAppear&lt;/code&gt;之后&lt;code&gt;reloadData()&lt;/code&gt;。&lt;br&gt;所以重写这个方法会有效果。&lt;/p&gt;
&lt;p&gt;运行结果如图：&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-23%20at%206.42.30%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;待解决：为什么第一屏的-cell-样式会不正常？&quot;&gt;&lt;a href=&quot;#待解决：为什么第一屏的-cell-样式会不正常？&quot; class=&quot;headerlink&quot; title=&quot;待解决：为什么第一屏的 cell 样式会不正常？&quot;&gt;&lt;/a&gt;待解决：为什么第一屏的 cell 样式会不正常？&lt;/h3&gt;&lt;p&gt;为什么第一屏的 cell 样式会不正常？&lt;/p&gt;
&lt;p&gt;为什么在&lt;code&gt;viewDidLoad&lt;/code&gt;或者&lt;code&gt;viewWillAppear&lt;/code&gt;方法里面&lt;code&gt;reloadData()&lt;/code&gt;没有效果？&lt;/p&gt;
&lt;p&gt;另外&lt;code&gt;estimatedHeightForRowAtIndexPath&lt;/code&gt;更明确的用法是什么？（我发现，当修复了之前的问题之后，注释掉重写的&lt;code&gt;heightForRowAtIndexPath&lt;/code&gt;和&lt;code&gt;estimatedHeightForRowAtIndexPath&lt;/code&gt; cell 的样式也是自适应的，label 显示也正常。）&lt;/p&gt;
&lt;p&gt;下次继续。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;多余的空白部分怎么办？&quot;&gt;&lt;a href=&quot;#多余的空白部分怎么办？&quot; class=&quot;headerlink&quot; title=&quot;多余的空白部分怎么办？&quot;&gt;&lt;/a&gt;多余的空白部分怎么办？&lt;/h3&gt;&lt;p&gt;我用上一篇文章提到的更优方案修改了模拟微博的项目。&lt;/p&gt;
&lt;p&gt;运
    
    </summary>
    
      <category term="iOS" scheme="http://cheng-kang.github.io/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://cheng-kang.github.io/tags/iOS/"/>
    
      <category term="AutoLayout" scheme="http://cheng-kang.github.io/tags/AutoLayout/"/>
    
      <category term="swift" scheme="http://cheng-kang.github.io/tags/swift/"/>
    
      <category term="UITableView" scheme="http://cheng-kang.github.io/tags/UITableView/"/>
    
  </entry>
  
  <entry>
    <title>AutoLayout：constraint priority 约束优先级（九宫格续，一个更优方案）</title>
    <link href="http://cheng-kang.github.io/2016/03/20/AutoLayout%EF%BC%9Aconstraint%20priority%20%E7%BA%A6%E6%9D%9F%E4%BC%98%E5%85%88%E7%BA%A7%EF%BC%88%E4%B9%9D%E5%AE%AB%E6%A0%BC%E7%BB%AD%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%9B%B4%E4%BC%98%E6%96%B9%E6%A1%88%EF%BC%89/"/>
    <id>http://cheng-kang.github.io/2016/03/20/AutoLayout：constraint priority 约束优先级（九宫格续，一个更优方案）/</id>
    <published>2016-03-20T22:49:31.000Z</published>
    <updated>2016-03-21T03:18:07.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;这两个项目的源码均在我的 github，如有需要直接下载下来试一试。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cheng-kang/iosDev/tree/master/Weibo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;模仿微博客户端&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cheng-kang/iosDev/tree/master/Dynamic%20Table%20View%20Test&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;自适应高度测试用项目&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;之前因为觉得麻烦，没有在那个项目里面尝试把九宫格图片分别作为九个&lt;code&gt;UIImageView&lt;/code&gt;来处理（而非一个&lt;code&gt;StackView&lt;/code&gt;）。这次我新建了一个项目，来尝试这种情况。&lt;/p&gt;
&lt;p&gt;依然是九宫格格子长宽 75px/75px，单张大图长宽 200px/200px。&lt;/p&gt;
&lt;p&gt;效果如下图。用了一些不同的颜色让各个 view 更明显。因为我用的图片背景都是白色，所以我把单张大图右移了一些以示区分。右边那一块白色就是单张大图。（上下两块区域的文字位置没调好，但这不是重点：D）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-20%20at%208.33.20%20PM.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;相同的高度？&quot;&gt;&lt;a href=&quot;#相同的高度？&quot; class=&quot;headerlink&quot; title=&quot;相同的高度？&quot;&gt;&lt;/a&gt;相同的高度？&lt;/h3&gt;&lt;p&gt;一看图就能发现，单张大图和九宫格是一样高的。&lt;/p&gt;
&lt;p&gt;我用&lt;code&gt;print(onePic.frame.height)&lt;/code&gt;单张大图高度打印下来看，结果是 200.0。没有问题。&lt;/p&gt;
&lt;p&gt;难道是九宫格变小了？&lt;code&gt;print(firstImg.frame.height)&lt;/code&gt;结果是 75.0。也没问题。&lt;/p&gt;
&lt;p&gt;打印没成功，于是我测量了一下截图中九宫格和单张大图的高度，结果两者都是 233px。&lt;strong&gt;这说明单张大图被拉伸了。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;然后我突然想起&lt;code&gt;print(onePic.image.size.height)&lt;/code&gt;，打印出来结果是 233.0。图片果然被拉伸了。&lt;/p&gt;
&lt;p&gt;之后我又检查了一下上次的截图，发现上次的单张大图一样被拉伸到九宫格的高度。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;原因：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这次的模拟是重现上次的解决方案，只是将&lt;code&gt;StackView&lt;/code&gt;换成了 9 个独立的&lt;code&gt;UIImageView&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;还是保持了底部的 button panel 与 onePic 和九宫格的间距都是 8px。（这次因为是分离的九个&lt;code&gt;UIImageView&lt;/code&gt;，所以设置的是 button panel 和第九章图片的距离为 8px， ninethPic）&lt;/p&gt;
&lt;p&gt;问题应该就是出在这里。当 button panel 与 onePic 之间存在这个 8px 的约束时，&lt;code&gt;AutoLayout&lt;/code&gt;忽略了设定在 onePic 上固定高宽 200px 的约束，拉伸图片，使它满足和 button panel 的间距为 8px。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;因为我也是刚接触 AutoLayout 不久，所以不清楚这样的情况是不是在文档里面已经写明了，还是这只是一个实际中发生的情况需要我们以后注意。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;hidden-只是隐身、不可见，不是完全消失&quot;&gt;&lt;a href=&quot;#hidden-只是隐身、不可见，不是完全消失&quot; class=&quot;headerlink&quot; title=&quot;hidden 只是隐身、不可见，不是完全消失&quot;&gt;&lt;/a&gt;hidden 只是隐身、不可见，不是完全消失&lt;/h3&gt;&lt;p&gt;上一篇文章最后一部分是：九宫格图片数量变化时手动适应高度。&lt;/p&gt;
&lt;p&gt;当时觉得是因为我用的&lt;code&gt;StackView&lt;/code&gt;才导致隐藏下两排格子之后整个 view 的高度没有改变。现在我觉得我错了。&lt;/p&gt;
&lt;p&gt;真正的原因应该是，&lt;strong&gt;hidden 只是隐身、不可见，不是完全消失&lt;/strong&gt;。这意味着，虽然设置了图片为&lt;code&gt;hidden&lt;/code&gt;，但其实它还是在那里占位的。所以整个 cell 里面的各种约束、子视图间的相对位置不会改变。&lt;/p&gt;
&lt;p&gt;那怎么让九宫格的高度在格子隐藏之后变小，使得底下的 button panel 可以向上自适应呢？&lt;/p&gt;
&lt;p&gt;第一个办法是上一篇文章中提到的通过修改&lt;code&gt;constraint.constant&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;另一个办法我们下面来说。&lt;/p&gt;
&lt;h3 id=&quot;constraint-priority&quot;&gt;&lt;a href=&quot;#constraint-priority&quot; class=&quot;headerlink&quot; title=&quot;constraint priority&quot;&gt;&lt;/a&gt;constraint priority&lt;/h3&gt;&lt;p&gt;为了让隐藏的 view 彻底消失，我赶紧 google 一下。&lt;/p&gt;
&lt;p&gt;在这个问题（&lt;a href=&quot;http://stackoverflow.com/questions/19561269/autolayout-with-hidden-uiviews&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《AutoLayout with hidden UIViews?》&lt;/a&gt;）的回答中找到了有趣的 constraint priority。&lt;/p&gt;
&lt;p&gt;被采纳的答案用的是提到过的第一个办法。&lt;/p&gt;
&lt;p&gt;得票第二的回答提到了另一种办法。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The solution of using a constant 0 when hidden and another constant if you show it again is functional, but it is unsatisfying if your content has a flexible size. You’d need to measure your flexible content and set a constant back. This feels wrong, and has issues if content changes size because of server or UI events.&lt;br&gt;I have a better solution.&lt;br&gt;The idea is to set the a 0 height rule to have high priority when we hide the element so that it takes up no autolayout space.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;他提到如果你的内容大小是可变化的，那么修改&lt;code&gt;constraints.constant&lt;/code&gt;会很麻烦。这一点我很赞同。&lt;/p&gt;
&lt;p&gt;而更好的办法就是设置 &lt;strong&gt;constraint priority&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;官方文档：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/AppKit/Reference/NSLayoutConstraint_Class/#//apple_ref/occ/instp/NSLayoutConstraint/priority&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NSLayoutConstraint&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/AppKit/Reference/NSLayoutConstraint_Class/#//apple_ref/c/econst/UILayoutPriorityRequired&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;UILayoutPriorityRequired&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;简单来说，你可以给约束设置优先级，它的值在 0 - 1000 之间，优先极高的会先被满足。&lt;/p&gt;
&lt;p&gt;比如拿我现在这个例子来说，现在有 button panel - onePic 和 button panel - ninethPic 两个 8px 间距的约束，分别对应的&lt;code&gt;IBOutlet&lt;/code&gt;是&lt;code&gt;bpAndOnePic&lt;/code&gt;以及&lt;code&gt;bpAndNinethPic&lt;/code&gt;。假如我们如下设置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;bpAndOnePic.priority = 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bpAndNinethPic.priority = 250&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;那么&lt;code&gt;AutoLayout&lt;/code&gt;会优先满足 button panel 和 onePic 之间的约束，效果如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-20%20at%2010.10.32%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;可以看到 button panel 跑到上面去了。单张大图大小正常了。&lt;/p&gt;
&lt;h3 id=&quot;实现自动向上适应&quot;&gt;&lt;a href=&quot;#实现自动向上适应&quot; class=&quot;headerlink&quot; title=&quot;实现自动向上适应&quot;&gt;&lt;/a&gt;实现自动向上适应&lt;/h3&gt;&lt;p&gt;九宫格的九张图片对应的&lt;code&gt;IBOutlet&lt;/code&gt;分别为 firstPic、secondPic、thirdPic、fourthPic…ninethPic；单张大图为 onePic；底部 button panel 为 buttonPanel。&lt;/p&gt;
&lt;p&gt;添加 buttonPanel 分别和 onePic、firstPic、fourthPic 以及 seventhPic 之间的 8px 上边距约束。&lt;/p&gt;
&lt;p&gt;bpAndOnePic 是 button panel 和单张大图之间的约束；bpAndFirstPic 是 button panel 和九宫格第一张图之间的约束，bpAndFourthPic.priority 和 bpAndSeventhPic.priority 与之类似。（因为是九宫格，所以高度由每排第一张图存不存在决定。）&lt;/p&gt;
&lt;p&gt;有了 constraint priority，我们可以这样设置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;bpAndOnePic.priority = firstPic.hidden ? 1000 : 250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bpAndFirstPic.priority = fourthPic.hidden &amp;amp;&amp;amp; seventhPic.hidden &amp;amp;&amp;amp; !firstPic.hidden ? 1000 : 250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bpAndFourthPic.priority = !fourthPic.hidden &amp;amp;&amp;amp; seventhPic.hidden ? 1000 : 250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bpAndSeventhPic.priority = !seventhPic.hidden ? 1000 : 250&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;情况分析&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;如果九宫格第一排第一张图片隐藏了，说明现在是在展示单张大图（微博没有附加图片的情况我们在这里不考虑）。这时&lt;code&gt;bpAndOnePic.priority&lt;/code&gt;等于 1000，而&lt;code&gt;bpAndSeventhPic.priority&lt;/code&gt;，&lt;code&gt;bpAndFourthPic.priority&lt;/code&gt;，&lt;code&gt;bpAndFirstPic.priority&lt;/code&gt;都等于 250。&lt;code&gt;bpAndOnePic.priority&lt;/code&gt;优先级最高，所以如下图：&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-20%20at%2010.33.17%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;li&gt;如果只有第三排的三张图片隐藏，那么&lt;code&gt;bpAndOnePic.priority&lt;/code&gt;、&lt;code&gt;bpAndSeventhPic.priority&lt;/code&gt;和&lt;code&gt;bpAndFirstPic.priority&lt;/code&gt;等于 250，而&lt;code&gt;bpAndFourthPic.priority&lt;/code&gt;等于 1000。&lt;code&gt;bpAndFourthPic.priority&lt;/code&gt;优先级最高，如下图：&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-20%20at%2010.33.47%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其他情况在此不一一列举。&lt;/p&gt;
&lt;p&gt;这样既解决了单张大图被拉伸的问题，又实现了九宫格图片数量变化时候的向上适应。&lt;/p&gt;
&lt;h3 id=&quot;待解决：多余的空白部分怎么办？&quot;&gt;&lt;a href=&quot;#待解决：多余的空白部分怎么办？&quot; class=&quot;headerlink&quot; title=&quot;待解决：多余的空白部分怎么办？&quot;&gt;&lt;/a&gt;待解决：多余的空白部分怎么办？&lt;/h3&gt;&lt;p&gt;可以从上面的截图上看到，当内容变化的时候，cell 的高度并没有变化，所以下方有空白。&lt;/p&gt;
&lt;p&gt;之前模仿微博客户端的项目中，我用了：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -&amp;gt; CGFloat &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return UITableViewAutomaticDimension&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func tableView(tableView: UITableView, estimatedHeightForRowAtIndexPath indexPath: NSIndexPath) -&amp;gt; CGFloat &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return UITableViewAutomaticDimension&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;它帮我自动去除了空白部分。&lt;/p&gt;
&lt;p&gt;我尝试加上这两个函数在这个项目中，结果是：&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-20%20at%2010.42.02%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;所以下一步我会去搞清楚这个自动计算重新设置高度具体是怎么回事，解决掉多余的空白部分。&lt;br&gt;（另外，我感觉这跟我之前的项目 cell 里包含了 textField 有关 = =）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;为很丑的例子 ui 道歉 = =&lt;/strong&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;这两个项目的源码均在我的 github，如有需要直接下载下来试一试。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cheng-kang/iosDev/tree/master/Weibo&quot;&gt;模仿微博客户端&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cheng-kang/iosDev/tree/master/Dynamic%20Table%20View%20Test&quot;&gt;自适应高度测试用项目&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;之前因为觉得麻烦，没有在那个项目里面尝试把九宫格图片分别作为九个&lt;code&gt;UIImageView&lt;/code&gt;来处理（而非一个&lt;code&gt;StackView&lt;/code&gt;）。这次我新建了一个项目，来尝试这种情况。&lt;/p&gt;
&lt;p&gt;依然是九宫格格子长宽 75px/75px，单张大图长宽 200px/200px。&lt;/p&gt;
&lt;p&gt;效果如下图。用了一些不同的颜色让各个 view 更明显。因为我用的图片背景都是白色，所以我把单张大图右移了一些以示区分。右边那一块白色就是单张大图。（上下两块区域的文字位置没调好，但这不是重点：D）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-20%20at%208.33.20%20PM.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://cheng-kang.github.io/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://cheng-kang.github.io/tags/iOS/"/>
    
      <category term="AutoLayout" scheme="http://cheng-kang.github.io/tags/AutoLayout/"/>
    
      <category term="constraint priority" scheme="http://cheng-kang.github.io/tags/constraint-priority/"/>
    
  </entry>
  
  <entry>
    <title>AutoLayout：UITableViewCell 自适应高度的一个例子</title>
    <link href="http://cheng-kang.github.io/2016/03/19/AutoLayout%EF%BC%9AUITableViewCell%20%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6%E7%9A%84%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90/"/>
    <id>http://cheng-kang.github.io/2016/03/19/AutoLayout：UITableViewCell 自适应高度的一个例子/</id>
    <published>2016-03-19T23:51:24.000Z</published>
    <updated>2016-03-21T03:19:13.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;目的&lt;/h3&gt;&lt;p&gt;我在模拟微博客户端。&lt;/p&gt;
&lt;p&gt;要实现：&lt;br&gt;当一条微博包含 2-9 张图的时候，图片以九宫格形式展示（去除空白格子）。&lt;br&gt;当一条微博只包含一张图的时候，图片会比较大。&lt;/p&gt;
&lt;h3 id=&quot;AutoLayout：实现-一张大图-和-九宫格-的样式&quot;&gt;&lt;a href=&quot;#AutoLayout：实现-一张大图-和-九宫格-的样式&quot; class=&quot;headerlink&quot; title=&quot;AutoLayout：实现 一张大图 和 九宫格 的样式&quot;&gt;&lt;/a&gt;AutoLayout：实现 一张大图 和 九宫格 的样式&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2010.55.31%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如图所示，九宫格图片为&lt;code&gt;Nine Pics&lt;/code&gt;，底部按钮为&lt;code&gt;3-button-panel&lt;/code&gt;（这个命名很奇怪我知道：D），单张大图为&lt;code&gt;One Pic&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;九宫格每张图的大小是 75px/75px，上下左右有 4px 的间距，所以总长宽为 233px/233px。&lt;/p&gt;
&lt;p&gt;单张大图的长宽为 200px/200px。&lt;/p&gt;
&lt;p&gt;先不管单张大图的&lt;code&gt;UIImageView&lt;/code&gt;，将 view 里面其他元素通过 AutoLayout 设置好。九宫格的九张图片因为排布整齐，所以我直接用的一个 &lt;strong&gt;stackview&lt;/strong&gt;。&lt;br&gt;设置&lt;code&gt;Nine Pics&lt;/code&gt;和&lt;code&gt;3-button-panel&lt;/code&gt;的间距为 8px。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;然后调整&lt;code&gt;One Pic&lt;/code&gt;大小为合适大小，用 Constrains 束缚住。通过键盘把&lt;code&gt;One Pic&lt;/code&gt;移动到和&lt;code&gt;Nine Pics&lt;/code&gt;左上角对齐的位置。（移动位置为了看起来更直观。所有的约束不是由在&lt;code&gt;storyboard&lt;/code&gt;上显示的位置决定的。）&lt;br&gt;将&lt;code&gt;One Pic&lt;/code&gt;左、上设置成和&lt;code&gt;Nice Pics&lt;/code&gt;一样的约束：左边 8px，上面 8px。&lt;/p&gt;
&lt;p&gt;这个时候因为单张大图的高比九宫格的高小，所以看上去&lt;code&gt;One Pic&lt;/code&gt;和&lt;code&gt;3-button-panel&lt;/code&gt;的间距一定是大于 8px。&lt;/p&gt;
&lt;p&gt;但是约束的神奇就是这样。&lt;/p&gt;
&lt;p&gt;我们现在设置&lt;code&gt;One Pic&lt;/code&gt;和&lt;code&gt;3-button-panel&lt;/code&gt;的间距为 8px。&lt;/p&gt;
&lt;p&gt;这个时候，在&lt;code&gt;3-button-panel&lt;/code&gt;上就有两个上方的约束。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2011.29.17%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;当我们要显示单张大图的时候，通过代码隐藏九宫格&lt;code&gt;self.ninePicsView.hidden = true&lt;/code&gt;。此时，&lt;code&gt;AutoLayout&lt;/code&gt;就会忽略&lt;code&gt;3-button-panel&lt;/code&gt;和&lt;code&gt;Nine Pics&lt;/code&gt;之间的约束，而&lt;code&gt;3-button-panel&lt;/code&gt;和&lt;code&gt;One Pic&lt;/code&gt;之间的约束正常。&lt;/p&gt;
&lt;p&gt;如图：&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2010.54.30%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;九宫格图片数量变化时手动适应高度&quot;&gt;&lt;a href=&quot;#九宫格图片数量变化时手动适应高度&quot; class=&quot;headerlink&quot; title=&quot;九宫格图片数量变化时手动适应高度&quot;&gt;&lt;/a&gt;九宫格图片数量变化时手动适应高度&lt;/h3&gt;&lt;p&gt;九宫格图片数量不够时，当然是通过&lt;code&gt;hidden=true&lt;/code&gt;隐藏多余的格子。&lt;/p&gt;
&lt;p&gt;但是可能是由于我用的&lt;strong&gt;stackview&lt;/strong&gt;，所以隐藏第三排或者第二排和第三排之后，整个 view 的高度并没有改变。（我没有尝试不用 stackview的情况，因为不想破坏辛辛苦苦做好的 storyboard ：D。等有时间我再新建一个项目试试。）&lt;/p&gt;
&lt;p&gt;所以需要手动改一下。&lt;/p&gt;
&lt;p&gt;方法是，建立一个 Constraint Outlet，根据情况修改它的值。&lt;/p&gt;
&lt;p&gt;之前我们设置了&lt;code&gt;3-button-panel&lt;/code&gt;和&lt;code&gt;Nine Pics&lt;/code&gt;之间的距离是 8px。我们建立一个这样的 IBOutlet：&lt;code&gt;@IBOutlet weak var constraintButtonPanelAndNinePic: NSLayoutConstraint!&lt;/code&gt;。这个时候，我们就可以通过代码来修改约束值。&lt;/p&gt;
&lt;p&gt;比如当有 6 张图片时，&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;self.seventhPic.hidden = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;self.eighthPic.hidden = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;self.ninethPic.hidden = true&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;隐藏多余的格子，然后&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;self.constraintButtonPanelAndNinePic.constant = -75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这个时候，&lt;code&gt;3-button-panel&lt;/code&gt;和&lt;code&gt;Nine Pics&lt;/code&gt;的相对位置就正确了。&lt;/p&gt;
&lt;h3 id=&quot;成果&quot;&gt;&lt;a href=&quot;#成果&quot; class=&quot;headerlink&quot; title=&quot;成果&quot;&gt;&lt;/a&gt;成果&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2010.54.30%20PM.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2010.54.16%20PM.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2011.49.07%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;目的&quot;&gt;&lt;a href=&quot;#目的&quot; class=&quot;headerlink&quot; title=&quot;目的&quot;&gt;&lt;/a&gt;目的&lt;/h3&gt;&lt;p&gt;我在模拟微博客户端。&lt;/p&gt;
&lt;p&gt;要实现：&lt;br&gt;当一条微博包含 2-9 张图的时候，图片以九宫格形式展示（去除空白格子）。&lt;br&gt;当一条微博只包含一张图的时候，图片会比较大。&lt;/p&gt;
&lt;h3 id=&quot;AutoLayout：实现-一张大图-和-九宫格-的样式&quot;&gt;&lt;a href=&quot;#AutoLayout：实现-一张大图-和-九宫格-的样式&quot; class=&quot;headerlink&quot; title=&quot;AutoLayout：实现 一张大图 和 九宫格 的样式&quot;&gt;&lt;/a&gt;AutoLayout：实现 一张大图 和 九宫格 的样式&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%2010.55.31%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如图所示，九宫格图片为&lt;code&gt;Nine Pics&lt;/code&gt;，底部按钮为&lt;code&gt;3-button-panel&lt;/code&gt;（这个命名很奇怪我知道：D），单张大图为&lt;code&gt;One Pic&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;九宫格每张图的大小是 75px/75px，上下左右有 4px 的间距，所以总长宽为 233px/233px。&lt;/p&gt;
&lt;p&gt;单张大图的长宽为 200px/200px。&lt;/p&gt;
&lt;p&gt;先不管单张大图的&lt;code&gt;UIImageView&lt;/code&gt;，将 view 里面其他元素通过 AutoLayout 设置好。九宫格的九张图片因为排布整齐，所以我直接用的一个 &lt;strong&gt;stackview&lt;/strong&gt;。&lt;br&gt;设置&lt;code&gt;Nine Pics&lt;/code&gt;和&lt;code&gt;3-button-panel&lt;/code&gt;的间距为 8px。&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://cheng-kang.github.io/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://cheng-kang.github.io/tags/iOS/"/>
    
      <category term="AutoLayout" scheme="http://cheng-kang.github.io/tags/AutoLayout/"/>
    
      <category term="九宫格" scheme="http://cheng-kang.github.io/tags/%E4%B9%9D%E5%AE%AB%E6%A0%BC/"/>
    
      <category term="自适应高度" scheme="http://cheng-kang.github.io/tags/%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6/"/>
    
  </entry>
  
  <entry>
    <title>UISearchBar（一）修改背景层和输入框层的背景颜色和边框颜色</title>
    <link href="http://cheng-kang.github.io/2016/03/19/UISearchBar%EF%BC%88%E4%B8%80%EF%BC%89%E4%BF%AE%E6%94%B9%E8%83%8C%E6%99%AF%E5%B1%82%E5%92%8C%E8%BE%93%E5%85%A5%E6%A1%86%E5%B1%82%E7%9A%84%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%E5%92%8C%E8%BE%B9%E6%A1%86%E9%A2%9C%E8%89%B2/"/>
    <id>http://cheng-kang.github.io/2016/03/19/UISearchBar（一）修改背景层和输入框层的背景颜色和边框颜色/</id>
    <published>2016-03-19T20:51:09.000Z</published>
    <updated>2016-03-21T03:21:32.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;在模仿微博 iOS 客户端的时候，希望将首页上方的搜索框做成和它一样的&lt;strong&gt;整体浅灰色背景+输入框白色背景&lt;/strong&gt;，发现直接使用&lt;code&gt;IBOutlet&lt;/code&gt;建立连接修改&lt;code&gt;bordercolor&lt;/code&gt;或者&lt;code&gt;borderwidth&lt;/code&gt;没有用。所以研究了一下如何修改&lt;code&gt;UIsearchBar&lt;/code&gt;相关的颜色。&lt;/p&gt;
&lt;p&gt;另外：发现原来微博客户端首页上面的 search bar 大概就是一个图片按钮【白眼】。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为微博客户端首页上面的 search bar 高度很小，自己尝试修改没成功，于是 google 了一下。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/30858969/can-the-height-of-the-uisearchbar-textfield-be-modified&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《StackOverflow: Can the height of the UISearchbar TextField be modified?》&lt;/a&gt; 中提到一种方案：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidAppear(animated: Bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.viewDidAppear(animated)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for subView in searchBar.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(subView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for subsubView in subView.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(subsubView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if let textField = subsubView as? UITextField &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;								textField.font = UIFont.systemFontOfSize(20)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;把这个函数放在&lt;code&gt;viewDidAppear&lt;/code&gt;会不会有点问题？是不是放在&lt;code&gt;viewWillAppear&lt;/code&gt;比较好？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;才发现 search bar 的结构很复杂。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;我加了两行打印，把子视图简单地打印出来。得到的结果：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;UIView: 0x7fb6204a09c0; frame = (390 0; 195 25); autoresize = RM+BM; gestureRecognizers = &amp;lt;NSArray: 0x7fb622479cf0&amp;gt;; layer = &amp;lt;CALayer: 0x7fb6204806e0&amp;gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;UIView: 0x7fb622122760; frame = (0 0; 320 44); clipsToBounds = YES; autoresize = W+H; layer = &amp;lt;CALayer: 0x7fb622120180&amp;gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;UISearchBarBackground: 0x7fb622123340; frame = (0 0; 320 44); opaque = NO; userInteractionEnabled = NO; layer = &amp;lt;CALayer: 0x7fb622123800&amp;gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;UISearchBarTextField: 0x7fb622124bf0; frame = (8 8; 304 28); text = &amp;apos;&amp;apos;; clipsToBounds = YES; opaque = NO; layer = &amp;lt;CALayer: 0x7fb622120290&amp;gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不去深究，简而言之，在它的第二层子视图(subview)中至少包含了一个&lt;code&gt;UIView&lt;/code&gt;和一个&lt;code&gt;UiTextField&lt;/code&gt;，分别是 search bar 的背景视图和文本输入框。&lt;/p&gt;
&lt;p&gt;Search bar 的样式就是它们定义的。所以我们对它们进行修改就能达到目的。&lt;/p&gt;
&lt;h3 id=&quot;试验&quot;&gt;&lt;a href=&quot;#试验&quot; class=&quot;headerlink&quot; title=&quot;试验&quot;&gt;&lt;/a&gt;试验&lt;/h3&gt;&lt;p&gt;假设： @IBOutlet weak var searchBar: UISearchBar!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;searchBar.tintColor: 设置输入框光标颜色&lt;/li&gt;
&lt;li&gt;searchBar.barTintColor: 设置外层背景颜色&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我通过下面的代码，试着给各种背景、边框设置不同颜色，得到的效果如图。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewWillAppear(animated: Bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for subView in searchBar.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for subsubView in subView.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if let bg = subsubView as? UIView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.backgroundColor = UIColor.whiteColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.layer.backgroundColor = UIColor.orangeColor().CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.layer.borderColor = UIColor.redColor().CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.layer.borderWidth = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if let textField = subsubView as? UITextField &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                textField.backgroundColor = UIColor.blueColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                textField.layer.borderColor = UIColor.greenColor().CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                textField.layer.borderWidth = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    searchBar.barTintColor = UIColor.yellowColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    searchBar.tintColor = UIColor.blackColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%207.57.34%20PM.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;可以看到，红色、蓝色、绿色、黑色和黄色产生了效果。&lt;/p&gt;
&lt;h3 id=&quot;如何使-borderwidth-和-backgroundColor-生效&quot;&gt;&lt;a href=&quot;#如何使-borderwidth-和-backgroundColor-生效&quot; class=&quot;headerlink&quot; title=&quot;如何使 borderwidth 和 backgroundColor 生效&quot;&gt;&lt;/a&gt;如何使 borderwidth 和 backgroundColor 生效&lt;/h3&gt;&lt;p&gt;有一个问题是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;必须设置&lt;code&gt;borderwidth&lt;/code&gt;，否则自定义的&lt;code&gt;bordercolor&lt;/code&gt;和&lt;code&gt;backgroundColor&lt;/code&gt;都不会生效。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如注释掉&lt;code&gt;borderwidth&lt;/code&gt;：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewWillAppear(animated: Bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for subView in searchBar.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for subsubView in subView.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if let bg = subsubView as? UIView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.backgroundColor = UIColor.whiteColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.layer.backgroundColor = UIColor.orangeColor().CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                bg.layer.borderColor = UIColor.redColor().CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //bg.layer.borderWidth = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if let textField = subsubView as? UITextField &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                textField.backgroundColor = UIColor.blueColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                textField.layer.borderColor = UIColor.greenColor().CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //textField.layer.borderWidth = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    searchBar.barTintColor = UIColor.yellowColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    searchBar.tintColor = UIColor.blackColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%207.54.24%20PM.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;会发现&lt;strong&gt;红色&lt;/strong&gt;和&lt;strong&gt;绿色&lt;/strong&gt;不见了。&lt;/p&gt;
&lt;h3 id=&quot;背后的-view&quot;&gt;&lt;a href=&quot;#背后的-view&quot; class=&quot;headerlink&quot; title=&quot;背后的 view&quot;&gt;&lt;/a&gt;背后的 view&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;仔细看&lt;/strong&gt;&lt;br&gt;这个时候在文本输入框的角落出现了橙色。&lt;/p&gt;
&lt;p&gt;这说明，searchBar 的子视图中，除了一个作为整体背景的&lt;code&gt;UIView&lt;/code&gt;和文本输入框之外，还有一个和文本输入框相同大小的&lt;code&gt;UIView&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;所以我把文本输入框的背景色设置为&lt;code&gt;clearColor&lt;/code&gt;，然后得到下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%208.10.51%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这个 view 具体作用是什么，之后再来和另外几个一起一个一个弄清楚。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;另一个问题：当-searchBarStyle-为-UISearchBarStyle-Minimal-时&quot;&gt;&lt;a href=&quot;#另一个问题：当-searchBarStyle-为-UISearchBarStyle-Minimal-时&quot; class=&quot;headerlink&quot; title=&quot;另一个问题：当 searchBarStyle 为 UISearchBarStyle.Minimal 时&quot;&gt;&lt;/a&gt;另一个问题：当 searchBarStyle 为 UISearchBarStyle.Minimal 时&lt;/h3&gt;&lt;p&gt;&lt;code&gt;searchBarStyle&lt;/code&gt;默认为&lt;code&gt;Prominent&lt;/code&gt;，你可以自己修改为&lt;code&gt;Minimal&lt;/code&gt;，它的样式更简洁。&lt;/p&gt;
&lt;p&gt;但是，当我切换成&lt;code&gt;Minimal&lt;/code&gt;之后，结果变成这样了：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%208.15.12%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;可以看到，&lt;code&gt;searchBar.barTintColor = UIColor.yellowColor()&lt;/code&gt;没有生效。&lt;/p&gt;
&lt;p&gt;暂时不知道为什么，我猜是&lt;code&gt;Apple&lt;/code&gt;故意设置的不允许修改。&lt;/p&gt;
&lt;h3 id=&quot;默认的黑色边框&quot;&gt;&lt;a href=&quot;#默认的黑色边框&quot; class=&quot;headerlink&quot; title=&quot;默认的黑色边框&quot;&gt;&lt;/a&gt;默认的黑色边框&lt;/h3&gt;&lt;p&gt;当我把 search bar 背景颜色设置为我想要的浅灰色之后，又一个问题出现了。&lt;/p&gt;
&lt;p&gt;居然有默认的边框。而且我取色看了一下，在背景颜色不同时，边框颜色值还不一样……&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%208.45.34%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%208.46.09%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;我尝试设置&lt;code&gt;borderwidth&lt;/code&gt;为&lt;code&gt;0&lt;/code&gt;，可是边框依旧显示。（不信你试试：D ）&lt;/p&gt;
&lt;p&gt;所以我猜这可能是，当 search bar 没有边框的时候自动添加的强制性边框，用于和其他元素区别吧。&lt;/p&gt;
&lt;p&gt;不过刚才已经找到修改边框颜色的方法了。所以用上面的方法修改即可，记得设置&lt;code&gt;borderWidth&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;这里也有一点要注意：&lt;/p&gt;
&lt;p&gt;因为上面我们并没有把每个&lt;code&gt;UIView&lt;/code&gt;单独拿出来进行操作，而是遍历子视图里的所有&lt;code&gt;UIView&lt;/code&gt;修改边框，这就导致包含的&lt;code&gt;textField&lt;/code&gt;边框也被修改为背景层的边框颜色。假如我们自定义的&lt;code&gt;textField&lt;/code&gt;边框颜色和背景层边框颜色不一样，那么这就不是我们想要的。记得在&lt;code&gt;if let bg = subsubView as? UIView&lt;/code&gt;后面再执行&lt;code&gt;if let textField = subsubView as? UITextField&lt;/code&gt;。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewWillAppear(animated: Bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for subView in searchBar.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(subView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for subsubView in subView.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                print(subsubView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if let bg = subsubView as? UIView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    bg.layer.borderColor = UIColor(red: 242/250, green: 242/250, blue: 242/250, alpha: 1).CGColor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    bg.layer.borderWidth = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if let textField = subsubView as? UITextField &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    textField.layer.borderWidth = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        searchBar.barTintColor = UIColor(red: 242/250, green: 242/250, blue: 242/250, alpha: 1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;最后附一张我的截图-D&quot;&gt;&lt;a href=&quot;#最后附一张我的截图-D&quot; class=&quot;headerlink&quot; title=&quot;最后附一张我的截图 : D&quot;&gt;&lt;/a&gt;最后附一张我的截图 : D&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7u2sl0.com1.z0.glb.clouddn.com/ios_Screen%20Shot%202016-03-19%20at%208.27.49%20PM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;如有错误，望指正。&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;如有更优方案，望赐教。&lt;/strong&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;在模仿微博 iOS 客户端的时候，希望将首页上方的搜索框做成和它一样的&lt;strong&gt;整体浅灰色背景+输入框白色背景&lt;/strong&gt;，发现直接使用&lt;code&gt;IBOutlet&lt;/code&gt;建立连接修改&lt;code&gt;bordercolor&lt;/code&gt;或者&lt;code&gt;borderwidth&lt;/code&gt;没有用。所以研究了一下如何修改&lt;code&gt;UIsearchBar&lt;/code&gt;相关的颜色。&lt;/p&gt;
&lt;p&gt;另外：发现原来微博客户端首页上面的 search bar 大概就是一个图片按钮【白眼】。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为微博客户端首页上面的 search bar 高度很小，自己尝试修改没成功，于是 google 了一下。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/30858969/can-the-height-of-the-uisearchbar-textfield-be-modified&quot;&gt;《StackOverflow: Can the height of the UISearchbar TextField be modified?》&lt;/a&gt; 中提到一种方案：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidAppear(animated: Bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.viewDidAppear(animated)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for subView in searchBar.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(subView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for subsubView in subView.subviews  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(subsubView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if let textField = subsubView as? UITextField &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;								textField.font = UIFont.systemFontOfSize(20)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;把这个函数放在&lt;code&gt;viewDidAppear&lt;/code&gt;会不会有点问题？是不是放在&lt;code&gt;viewWillAppear&lt;/code&gt;比较好？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;才发现 search bar 的结构很复杂。&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://cheng-kang.github.io/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://cheng-kang.github.io/tags/iOS/"/>
    
      <category term="AutoLayout" scheme="http://cheng-kang.github.io/tags/AutoLayout/"/>
    
      <category term="UISearchBar" scheme="http://cheng-kang.github.io/tags/UISearchBar/"/>
    
      <category term="color" scheme="http://cheng-kang.github.io/tags/color/"/>
    
  </entry>
  
  <entry>
    <title>Fire Blog 中文说明</title>
    <link href="http://cheng-kang.github.io/2016/03/18/Fire-Blog-%E4%B8%AD%E6%96%87%E8%AF%B4%E6%98%8E/"/>
    <id>http://cheng-kang.github.io/2016/03/18/Fire-Blog-中文说明/</id>
    <published>2016-03-18T12:51:29.000Z</published>
    <updated>2016-03-21T03:22:46.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;起源&quot;&gt;&lt;a href=&quot;#起源&quot; class=&quot;headerlink&quot; title=&quot;起源&quot;&gt;&lt;/a&gt;起源&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Github&lt;/code&gt;提供了&lt;a href=&quot;https://pages.github.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github Pages&lt;/a&gt;服务，相当于为你提供了服务器空间和还算比较好看的域名（如： &lt;a href=&quot;http://username.github.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://username.github.io&lt;/a&gt;, &lt;a href=&quot;http://username.github.com），你可以利用它建立一个静态博客。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://username.github.com），你可以利用它建立一个静态博客。&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;因为简单免费而且访问速度快（比我自己的阿里云快多了【翻白眼】），所以越来越多的人使用&lt;code&gt;Github Pages&lt;/code&gt;搭建技术博客。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：也可以绑定自己的域名。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;两个星期之前，自己才通过朋友的博客知道这个好东西。&lt;/p&gt;
&lt;p&gt;官方提供&lt;code&gt;Jekyll&lt;/code&gt;的支持,可以快速搭建不用到数据库的博客。用法是配置好之后，每次将写好的博客&lt;code&gt;markdown&lt;/code&gt;文件上&lt;code&gt;push&lt;/code&gt;到&lt;code&gt;github&lt;/code&gt;里面。&lt;/p&gt;
&lt;p&gt;不过当时也没过多在意，一是我自己有一个放在阿里云上的&lt;code&gt;wordpress&lt;/code&gt;博客，二是觉得每次还要上传文件嫌麻烦。&lt;/p&gt;
&lt;p&gt;直到有一天我在&lt;code&gt;Youtube&lt;/code&gt;上看相声视频的时候给我推送了一个广告（不得不说广告投得蛮准的，很多时候我都把广告看完了，尤其是那个参加空军的广告：）女王，我要当兵），是一个在线数据库服务，叫&lt;code&gt;firebase&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;firebase&lt;/code&gt;提供免费的基础服务，可以通过&lt;code&gt;js&lt;/code&gt;进行数据库操作。&lt;/p&gt;
&lt;p&gt;我突然就想起来&lt;code&gt;Github Pages&lt;/code&gt;如果用上这个，不就有数据库了吗。&lt;/p&gt;
&lt;p&gt;于是决定用&lt;code&gt;angularjs&lt;/code&gt;+&lt;code&gt;firebase&lt;/code&gt;写一个博客框架，让不懂代码的朋友到时候只用&lt;code&gt;fork&lt;/code&gt;下项目代码，用自己的&lt;code&gt;github&lt;/code&gt;账号登录就可以创建好自己的博客。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h3&gt;&lt;p&gt;名字叫&lt;code&gt;Fire Blog&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;1 从&lt;a href=&quot;http://cheng-kang.github.com/fireblog&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;项目主页&lt;/a&gt;&lt;code&gt;fork&lt;/code&gt;项目代码&lt;/p&gt;
&lt;p&gt;2 修改&lt;code&gt;fork&lt;/code&gt;下来的项目的项目名称为 &lt;code&gt;username.github.io&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;3 等待一两分钟，访问刚刚设置的&lt;code&gt;https://username.github.io&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;4 点击那个隐藏的后台登录入口&lt;/p&gt;
&lt;p&gt;5 使用&lt;code&gt;Github&lt;/code&gt;账号登录&lt;/p&gt;
&lt;p&gt;6 按要求修改配置文件&lt;/p&gt;
&lt;p&gt;7 &lt;code&gt;Tada！&lt;/code&gt;然后你的博客就创建好了！&lt;/p&gt;
&lt;h3 id=&quot;其他的话&quot;&gt;&lt;a href=&quot;#其他的话&quot; class=&quot;headerlink&quot; title=&quot;其他的话&quot;&gt;&lt;/a&gt;其他的话&lt;/h3&gt;&lt;p&gt;我自己还没跟开源项目挂上过勾。&lt;/p&gt;
&lt;p&gt;我想开源项目应该就是能够帮上别人，也希望有人一起来完善。&lt;/p&gt;
&lt;p&gt;这个项目的本意就是这样。&lt;/p&gt;
&lt;p&gt;希望&lt;code&gt;Fire Blog&lt;/code&gt;成为大家的一个选择，也希望其他程序员来添砖加瓦、建议指正。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;起源&quot;&gt;&lt;a href=&quot;#起源&quot; class=&quot;headerlink&quot; title=&quot;起源&quot;&gt;&lt;/a&gt;起源&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Github&lt;/code&gt;提供了&lt;a href=&quot;https://pages.github.com/&quot;&gt;Github Pages&lt;/a&gt;服务，相当于为你提供了服务器空间和还算比较好看的域名（如： &lt;a href=&quot;http://username.github.io&quot;&gt;http://username.github.io&lt;/a&gt;, &lt;a href=&quot;http://username.github.com），你可以利用它建立一个静态博客。&quot;&gt;http://username.github.com），你可以利用它建立一个静态博客。&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;因为简单免费而且访问速度快（比我自己的阿里云快多了【翻白眼】），所以越来越多的人使用&lt;code&gt;Github Pages&lt;/code&gt;搭建技术博客。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：也可以绑定自己的域名。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;两个星期之前，自己才通过朋友的博客知道这个好东西。&lt;/p&gt;
&lt;p&gt;官方提供&lt;code&gt;Jekyll&lt;/code&gt;的支持,可以快速搭建不用到数据库的博客。用法是配置好之后，每次将写好的博客&lt;code&gt;markdown&lt;/code&gt;文件上&lt;code&gt;push&lt;/code&gt;到&lt;code&gt;github&lt;/code&gt;里面。&lt;/p&gt;
&lt;p&gt;不过当时也没过多在意，一是我自己有一个放在阿里云上的&lt;code&gt;wordpress&lt;/code&gt;博客，二是觉得每次还要上传文件嫌麻烦。&lt;/p&gt;
&lt;p&gt;直到有一天我在&lt;code&gt;Youtube&lt;/code&gt;上看相声视频的时候给我推送了一个广告（不得不说广告投得蛮准的，很多时候我都把广告看完了，尤其是那个参加空军的广告：）女王，我要当兵），是一个在线数据库服务，叫&lt;code&gt;firebase&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;firebase&lt;/code&gt;提供免费的基础服务，可以通过&lt;code&gt;js&lt;/code&gt;进行数据库操作。&lt;/p&gt;
&lt;p&gt;我突然就想起来&lt;code&gt;Github Pages&lt;/code&gt;如果用上这个，不就有数据库了吗。&lt;/p&gt;
&lt;p&gt;于是决定用&lt;code&gt;angularjs&lt;/code&gt;+&lt;code&gt;firebase&lt;/code&gt;写一个博客框架，让不懂代码的朋友到时候只用&lt;code&gt;fork&lt;/code&gt;下项目代码，用自己的&lt;code&gt;github&lt;/code&gt;账号登录就可以创建好自己的博客。&lt;br&gt;
    
    </summary>
    
      <category term="Tech" scheme="http://cheng-kang.github.io/categories/Tech/"/>
    
    
      <category term="fireblog" scheme="http://cheng-kang.github.io/tags/fireblog/"/>
    
  </entry>
  
  <entry>
    <title>FireBlog Instruction</title>
    <link href="http://cheng-kang.github.io/2016/03/18/FireBlog-Instruction/"/>
    <id>http://cheng-kang.github.io/2016/03/18/FireBlog-Instruction/</id>
    <published>2016-03-18T12:47:49.000Z</published>
    <updated>2016-03-21T03:22:54.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;Why&quot;&gt;&lt;a href=&quot;#Why&quot; class=&quot;headerlink&quot; title=&quot;Why&quot;&gt;&lt;/a&gt;Why&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Github&lt;/code&gt; offers the wonderful &lt;a href=&quot;https://pages.github.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github Pages&lt;/a&gt; service. With it, you don’t need to worry about server or domain name(you can have customed domain name like: &lt;a href=&quot;http://username.github.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://username.github.io&lt;/a&gt;, &lt;a href=&quot;http://username.github.com）&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://username.github.com）&lt;/a&gt;. It’s super convenient to set up a static blog based on the service.&lt;/p&gt;
&lt;p&gt;Since it’s easy, free and fast, more and more people start to use this service.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;P.S. You can also use your own domain name.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Two weeks ago, I noticed the magic &lt;code&gt;Github Pages&lt;/code&gt; supprisingly.&lt;/p&gt;
&lt;p&gt;There is official support for &lt;code&gt;Jekyll&lt;/code&gt;, by which you could easily set up a blog without database. You need to push the markdown file of your blog to your git repository.&lt;/p&gt;
&lt;p&gt;I didn’t pay much attention to it though. After all I have my own &lt;code&gt;wordpress&lt;/code&gt; blog on Ali Cloud and hate the idea of manually pushing .md files everytime.&lt;/p&gt;
&lt;p&gt;Then one day I was pused a ad about &lt;code&gt;fireblog&lt;/code&gt; when I was watching video on &lt;code&gt;Youtube&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;firebase&lt;/code&gt; offers a basic free service, by which you could operate on the database by &lt;code&gt;js&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And it suddenly came to me that I could combine this with &lt;code&gt;Github Pages&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So I decided to write a blog framework based on &lt;code&gt;Github Pages&lt;/code&gt;, &lt;code&gt;AngularJS&lt;/code&gt; and &lt;code&gt;firebase&lt;/code&gt;. If I succeed, then people with no idea about programming will be able to set up their own blogs by just &lt;code&gt;forking&lt;/code&gt; the project and logging in with their &lt;code&gt;Github&lt;/code&gt; account.&lt;/p&gt;
&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;It’s named &lt;code&gt;Fire Blog&lt;/code&gt;。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;1 &lt;code&gt;fork&lt;/code&gt; the source code from &lt;a href=&quot;http://cheng-kang.github.com/fireblog&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;the project home page&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2 change the name of the project you’ve &lt;code&gt;forked&lt;/code&gt; to &lt;code&gt;username.github.io&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;3 drink your coffee and visit &lt;code&gt;https://username.github.io&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;4 click that ‘hidden’ login-page entry button&lt;/p&gt;
&lt;p&gt;5 log in with your &lt;code&gt;Github&lt;/code&gt; account&lt;/p&gt;
&lt;p&gt;6 edit the &lt;code&gt;config.js&lt;/code&gt; file as instructed&lt;/p&gt;
&lt;p&gt;7 &lt;code&gt;Tada！&lt;/code&gt; Here is your blog!&lt;/p&gt;
&lt;h3 id=&quot;From-the-author&quot;&gt;&lt;a href=&quot;#From-the-author&quot; class=&quot;headerlink&quot; title=&quot;From the author&quot;&gt;&lt;/a&gt;From the author&lt;/h3&gt;&lt;p&gt;I myself have never owned an open source project.&lt;/p&gt;
&lt;p&gt;A open source project must be one that helps those who need and gets help from those who are willing to share.&lt;/p&gt;
&lt;p&gt;And this is what I want to achieve with this project.&lt;/p&gt;
&lt;p&gt;I sincerely hope that &lt;code&gt;Fire Blog&lt;/code&gt; is a good choice for you, and that you are happy to refine or correct it.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Why&quot;&gt;&lt;a href=&quot;#Why&quot; class=&quot;headerlink&quot; title=&quot;Why&quot;&gt;&lt;/a&gt;Why&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Github&lt;/code&gt; offers the wonderful &lt;a href=&quot;https://pages.github.com/&quot;&gt;Github Pages&lt;/a&gt; service. With it, you don’t need to worry about server or domain name(you can have customed domain name like: &lt;a href=&quot;http://username.github.io&quot;&gt;http://username.github.io&lt;/a&gt;, &lt;a href=&quot;http://username.github.com）&quot;&gt;http://username.github.com）&lt;/a&gt;. It’s super convenient to set up a static blog based on the service.&lt;/p&gt;
&lt;p&gt;Since it’s easy, free and fast, more and more people start to use this service.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;P.S. You can also use your own domain name.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Two weeks ago, I noticed the magic &lt;code&gt;Github Pages&lt;/code&gt; supprisingly.&lt;/p&gt;
&lt;p&gt;There is official support for &lt;code&gt;Jekyll&lt;/code&gt;, by which you could easily set up a blog without database. You need to push the markdown file of your blog to your git repository.&lt;/p&gt;
&lt;p&gt;I didn’t pay much attention to it though. After all I have my own &lt;code&gt;wordpress&lt;/code&gt; blog on Ali Cloud and hate the idea of manually pushing .md files everytime.&lt;/p&gt;
&lt;p&gt;Then one day I was pused a ad about &lt;code&gt;fireblog&lt;/code&gt; when I was watching video on &lt;code&gt;Youtube&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;firebase&lt;/code&gt; offers a basic free service, by which you could operate on the database by &lt;code&gt;js&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And it suddenly came to me that I could combine this with &lt;code&gt;Github Pages&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So I decided to write a blog framework based on &lt;code&gt;Github Pages&lt;/code&gt;, &lt;code&gt;AngularJS&lt;/code&gt; and &lt;code&gt;firebase&lt;/code&gt;. If I succeed, then people with no idea about programming will be able to set up their own blogs by just &lt;code&gt;forking&lt;/code&gt; the project and logging in with their &lt;code&gt;Github&lt;/code&gt; account.&lt;/p&gt;
&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;It’s named &lt;code&gt;Fire Blog&lt;/code&gt;。&lt;br&gt;
    
    </summary>
    
      <category term="Tech" scheme="http://cheng-kang.github.io/categories/Tech/"/>
    
    
      <category term="fireblog" scheme="http://cheng-kang.github.io/tags/fireblog/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://cheng-kang.github.io/2016/03/18/hello-world/"/>
    <id>http://cheng-kang.github.io/2016/03/18/hello-world/</id>
    <published>2016-03-18T12:01:11.000Z</published>
    <updated>2016-03-18T12:01:11.000Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
