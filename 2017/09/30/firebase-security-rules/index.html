<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="åŸæ–‡é“¾æ¥ï¼šFirebase Security &amp;amp; Rules

Firebase æ˜¯ä¸€ä¸ªå¯ä»¥ä»ä»»æ„å»ºç«‹è¿æ¥äº†çš„å®¢æˆ·ç«¯è®¿é—®çš„äº‘æ•°æ®åº“ã€‚å› ä¸ºä»»æ„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥åˆ°ä»»æ„ Firebase [æ•°æ®åº“]ï¼Œä½ å¿…é¡»åˆ¶å®šå®‰å…¨è§„åˆ™æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å†™ä¸å¥½æ°å½“çš„å®‰å…¨è§„åˆ™ä¼šè®©ä½ æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼ä½ é©¬ä¸Šå°±èƒ½å­¦åˆ°å¸®ä½ ç´§ç´§é”ä½ä½ çš„æ•°æ®çš„å…¨éƒ¨çŸ¥è¯†äº†ã€‚
ä¿æŒå®‰å…¨è§„åˆ™ç®€æ´ã€‚å®‰å…¨è§„åˆ™å¯èƒ½å˜å¾—è¿‡äºå¤æ‚ï¼Œå¹¶å¾ˆå¿«å˜å¾—ä¸å—æ§">
<meta property="og:type" content="article">
<meta property="og:title" content="Firebase å®‰å…¨ä¸è§„åˆ™">
<meta property="og:url" content="http://chengkang.me/2017/09/30/firebase-security-rules/index.html">
<meta property="og:site_name" content="CHENG KANG">
<meta property="og:description" content="åŸæ–‡é“¾æ¥ï¼šFirebase Security &amp;amp; Rules

Firebase æ˜¯ä¸€ä¸ªå¯ä»¥ä»ä»»æ„å»ºç«‹è¿æ¥äº†çš„å®¢æˆ·ç«¯è®¿é—®çš„äº‘æ•°æ®åº“ã€‚å› ä¸ºä»»æ„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥åˆ°ä»»æ„ Firebase [æ•°æ®åº“]ï¼Œä½ å¿…é¡»åˆ¶å®šå®‰å…¨è§„åˆ™æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å†™ä¸å¥½æ°å½“çš„å®‰å…¨è§„åˆ™ä¼šè®©ä½ æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼ä½ é©¬ä¸Šå°±èƒ½å­¦åˆ°å¸®ä½ ç´§ç´§é”ä½ä½ çš„æ•°æ®çš„å…¨éƒ¨çŸ¥è¯†äº†ã€‚
ä¿æŒå®‰å…¨è§„åˆ™ç®€æ´ã€‚å®‰å…¨è§„åˆ™å¯èƒ½å˜å¾—è¿‡äºå¤æ‚ï¼Œå¹¶å¾ˆå¿«å˜å¾—ä¸å—æ§">
<meta property="og:updated_time" content="2017-09-30T13:09:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Firebase å®‰å…¨ä¸è§„åˆ™">
<meta name="twitter:description" content="åŸæ–‡é“¾æ¥ï¼šFirebase Security &amp;amp; Rules

Firebase æ˜¯ä¸€ä¸ªå¯ä»¥ä»ä»»æ„å»ºç«‹è¿æ¥äº†çš„å®¢æˆ·ç«¯è®¿é—®çš„äº‘æ•°æ®åº“ã€‚å› ä¸ºä»»æ„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥åˆ°ä»»æ„ Firebase [æ•°æ®åº“]ï¼Œä½ å¿…é¡»åˆ¶å®šå®‰å…¨è§„åˆ™æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å†™ä¸å¥½æ°å½“çš„å®‰å…¨è§„åˆ™ä¼šè®©ä½ æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼ä½ é©¬ä¸Šå°±èƒ½å­¦åˆ°å¸®ä½ ç´§ç´§é”ä½ä½ çš„æ•°æ®çš„å…¨éƒ¨çŸ¥è¯†äº†ã€‚
ä¿æŒå®‰å…¨è§„åˆ™ç®€æ´ã€‚å®‰å…¨è§„åˆ™å¯èƒ½å˜å¾—è¿‡äºå¤æ‚ï¼Œå¹¶å¾ˆå¿«å˜å¾—ä¸å—æ§">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Firebase å®‰å…¨ä¸è§„åˆ™</title>
    <!-- styles -->
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/lib/jquery/jquery.min.js"></script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-2379838451092125",
        enable_page_level_ads: true
      });
    </script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/index.html">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/cheng-kang">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/10/14/best-practice-for-firebase-realtime-datebase-development/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2017/06/06/learning-av-foundation-1/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://chengkang.me/2017/09/30/firebase-security-rules/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://chengkang.me/2017/09/30/firebase-security-rules/&text=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://chengkang.me/2017/09/30/firebase-security-rules/&is_video=false&description=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Firebase å®‰å…¨ä¸è§„åˆ™&body=Check out this article: http://chengkang.me/2017/09/30/firebase-security-rules/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://chengkang.me/2017/09/30/firebase-security-rules/&name=Firebase å®‰å…¨ä¸è§„åˆ™&description=&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://howtofirebase.com/firebase-security-rules-88d94606ce4a&quot;&gt;Firebase Security &amp;amp; Rules&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Firebase æ˜¯ä¸€ä¸ªå¯ä»¥ä»ä»»æ„å»ºç«‹è¿æ¥äº†çš„å®¢æˆ·ç«¯è®¿é—®çš„äº‘æ•°æ®åº“ã€‚å› ä¸ºä»»æ„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥åˆ°ä»»æ„ Firebase [æ•°æ®åº“]ï¼Œä½ &lt;strong&gt;å¿…é¡»&lt;/strong&gt;åˆ¶å®šå®‰å…¨è§„åˆ™æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å†™ä¸å¥½æ°å½“çš„å®‰å…¨è§„åˆ™ä¼šè®©ä½ æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼ä½ é©¬ä¸Šå°±èƒ½å­¦åˆ°å¸®ä½ ç´§ç´§é”ä½ä½ çš„æ•°æ®çš„å…¨éƒ¨çŸ¥è¯†äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¿æŒå®‰å…¨è§„åˆ™ç®€æ´ã€‚å®‰å…¨è§„åˆ™å¯èƒ½å˜å¾—è¿‡äºå¤æ‚ï¼Œå¹¶å¾ˆå¿«å˜å¾—ä¸å—æ§åˆ¶å¦‚æœä½ çš„æ•°æ®ç»“æ„ä¸å¤Ÿè®¾è®¡å……åˆ†çš„è¯ã€‚è¿™ç¯‡æ–‡ç« å±•ç¤ºäº†ä¸€äº›â€œæœ€ä½³â€å®è·µã€‚ä¼°è®¡ä½ ä¼šè®²å…¶ç•¥ä½œä¿®æ”¹å°±ç”¨åˆ°ä½ çš„ç”Ÿäº§åº”ç”¨ä¸­å»â€¦â€¦å¦‚æœä½ é€‰æ‹©é‡‡ç”¨è¿™äº›æ¨¡å¼ï¼Œè®°å¾—ä»”ç»†æƒ³æƒ³èƒŒåçš„å«ä¹‰å°±è¡Œã€‚ç¡®ä¿åœ¨ä½ å¼€å§‹æäº‹ä¹‹å‰ï¼Œè¯»äº†æ•´ç¯‡æ–‡ç« ä»¥åŠ&lt;a href=&quot;https://firebase.google.com/docs/database/security/&quot;&gt;å®‰å…¨è§„åˆ™æ–‡æ¡£&lt;/a&gt;å…¨æ–‡ã€‚&lt;/p&gt;"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„"><span class="toc-number">1.</span> <span class="toc-text">å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#çº§è”è§„åˆ™"><span class="toc-number">2.</span> <span class="toc-text">çº§è”è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¤ºä¾‹æ•°æ®ç»“æ„"><span class="toc-number">3.</span> <span class="toc-text">ç¤ºä¾‹æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢"><span class="toc-number">4.</span> <span class="toc-text">ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™"><span class="toc-number">5.</span> <span class="toc-text">éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä½¿ç”¨-Bolt-è§„åˆ™ç¼–è¯‘å™¨æ¥-streamline-ä½ çš„è§„åˆ™"><span class="toc-number">6.</span> <span class="toc-text">ä½¿ç”¨ Bolt è§„åˆ™ç¼–è¯‘å™¨æ¥ streamline ä½ çš„è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®"><span class="toc-number">7.</span> <span class="toc-text">æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®"><span class="toc-number">8.</span> <span class="toc-text">ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ«åè§„åˆ™"><span class="toc-number">9.</span> <span class="toc-text">åˆ«åè§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#éƒ¨ç½²ä½ çš„è§„åˆ™"><span class="toc-number">10.</span> <span class="toc-text">éƒ¨ç½²ä½ çš„è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»ƒä¹ "><span class="toc-number">11.</span> <span class="toc-text">ç»ƒä¹ </span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Firebase å®‰å…¨ä¸è§„åˆ™
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">CHENG KANG</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-10-01T04:08:37.000Z" itemprop="datePublished">2017-09-30</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Firebase/">Firebase</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://howtofirebase.com/firebase-security-rules-88d94606ce4a" target="_blank" rel="external">Firebase Security &amp; Rules</a></p>
</blockquote>
<p>Firebase æ˜¯ä¸€ä¸ªå¯ä»¥ä»ä»»æ„å»ºç«‹è¿æ¥äº†çš„å®¢æˆ·ç«¯è®¿é—®çš„äº‘æ•°æ®åº“ã€‚å› ä¸ºä»»æ„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥åˆ°ä»»æ„ Firebase [æ•°æ®åº“]ï¼Œä½ <strong>å¿…é¡»</strong>åˆ¶å®šå®‰å…¨è§„åˆ™æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å†™ä¸å¥½æ°å½“çš„å®‰å…¨è§„åˆ™ä¼šè®©ä½ æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼ä½ é©¬ä¸Šå°±èƒ½å­¦åˆ°å¸®ä½ ç´§ç´§é”ä½ä½ çš„æ•°æ®çš„å…¨éƒ¨çŸ¥è¯†äº†ã€‚</p>
<p>ä¿æŒå®‰å…¨è§„åˆ™ç®€æ´ã€‚å®‰å…¨è§„åˆ™å¯èƒ½å˜å¾—è¿‡äºå¤æ‚ï¼Œå¹¶å¾ˆå¿«å˜å¾—ä¸å—æ§åˆ¶å¦‚æœä½ çš„æ•°æ®ç»“æ„ä¸å¤Ÿè®¾è®¡å……åˆ†çš„è¯ã€‚è¿™ç¯‡æ–‡ç« å±•ç¤ºäº†ä¸€äº›â€œæœ€ä½³â€å®è·µã€‚ä¼°è®¡ä½ ä¼šè®²å…¶ç•¥ä½œä¿®æ”¹å°±ç”¨åˆ°ä½ çš„ç”Ÿäº§åº”ç”¨ä¸­å»â€¦â€¦å¦‚æœä½ é€‰æ‹©é‡‡ç”¨è¿™äº›æ¨¡å¼ï¼Œè®°å¾—ä»”ç»†æƒ³æƒ³èƒŒåçš„å«ä¹‰å°±è¡Œã€‚ç¡®ä¿åœ¨ä½ å¼€å§‹æäº‹ä¹‹å‰ï¼Œè¯»äº†æ•´ç¯‡æ–‡ç« ä»¥åŠ<a href="https://firebase.google.com/docs/database/security/" target="_blank" rel="external">å®‰å…¨è§„åˆ™æ–‡æ¡£</a>å…¨æ–‡ã€‚</p>
<a id="more"></a>
<h2 id="å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„"><a href="#å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„" class="headerlink" title="å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„"></a>å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„</h2><p>å®‰å…¨è§„åˆ™ç”±ä¸€ä¸ªå•ç‹¬çš„ JSON å¯¹è±¡ç®¡ç†ï¼Œä½ å¯ä»¥åœ¨ä½ çš„å®æ—¶æ•°æ®åº“æ§åˆ¶å°ç¼–è¾‘æˆ–è€…ä½¿ç”¨ Firebase CLI [æ¥ç¼–è¾‘]ã€‚è¿˜æœ‰ä¸€ä¸ªé¢å¤–æƒŠå–œï¼Œå¦‚æœä½ çš„è§„åˆ™æ ¼å¼é”™è¯¯çš„è¯ï¼Œæ§åˆ¶å°å’Œ CLI ä¼šç»™ä½ è­¦å‘Šã€‚</p>
<p>è§„åˆ™å¯¹è±¡å¼€å§‹æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line"> &quot;rules&quot;: </span><br><span class="line">  &#123; </span><br><span class="line">    &quot;.read&quot;: false,</span><br><span class="line">    &quot;.write&quot;: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ª JSON å¯¹è±¡çš„æ ¹èŠ‚ç‚¹å¿…é¡»å‘½åä¸º <code>rules</code>ã€‚<code>rules</code> èŠ‚ç‚¹é»˜è®¤ä¸å¯è¯»å†™ã€‚ä¸Šé¢çš„ç«‹å³æ˜¾å¼åœ°è®¾ç½®äº† <code>.read</code> å’Œ <code>.write</code> ä¸º <code>false</code>ï¼Œä½†æ˜¯ç•™ä¸ªç©ºç™½çš„è§„åˆ™ä¹Ÿä¼šæœ‰åŒæ ·çš„æ•ˆæœã€‚</p>
<h2 id="çº§è”è§„åˆ™"><a href="#çº§è”è§„åˆ™" class="headerlink" title="çº§è”è§„åˆ™"></a>çº§è”è§„åˆ™</h2><p>Firebase çº§è”è§„åˆ™æ˜¯è¿™æ ·çš„ï¼šæˆäºˆä¸€ä¸ªçˆ¶æ¯èŠ‚ç‚¹è¯»å†™æƒé™ä¼šåŒæ—¶æˆäºˆå…¶æ‰€æœ‰å­èŠ‚ç‚¹è¯»å†™æƒé™ã€‚</p>
<p>å†è¯´ä¸€éã€‚</p>
<p>Firebase çº§è”è§„åˆ™æ˜¯è¿™æ ·çš„ï¼šæˆäºˆä¸€ä¸ªçˆ¶æ¯èŠ‚ç‚¹è¯»å†™æƒé™ä¼šåŒæ—¶æˆäºˆå…¶æ‰€æœ‰å­èŠ‚ç‚¹è¯»å†™æƒé™ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªå·¨å¤§çš„â€œå‘â€ï¼Œå³ä½¿æ˜¯å¯¹äºæœ‰ç»éªŒçš„ Firebase ç”¨æˆ·æ¥è¯´ä¹Ÿæ˜¯è¿™æ ·ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸ºä»€ä¹ˆ Firebase è¿™æ ·æ¥å¤„ç†ï¼Œä»¥åŠæˆ‘ä»¬å¯ä»¥å¦‚ä½•ç»•è¿‡è¿™ä¸ªé™åˆ¶ã€‚</p>
<p>é¦–å…ˆï¼ŒFirebase æœ¬è´¨ä¸Šè¦æ±‚è¿™æ ·çš„ä¸€ç§è¡Œä¸ºã€‚å¦‚æœä½ åœ¨ Firebase é‡Œé¢æŸ¥è¯¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½ å°†å¾—åˆ°å…¶<em>æ‰€æœ‰</em>çš„å­èŠ‚ç‚¹ã€‚Firebase éå¸¸æ³¨é‡æ€§èƒ½è¡¨ç°ï¼Œå®ƒä¸ä¼šèŠ±æ—¶é—´æ¥åœ¨æ¯ä¸€ä¸ªå­èŠ‚ç‚¹ä¸Šå¥—ç”¨è§„åˆ™å¹¶ä¸”åšå‡ºå¯èƒ½çš„ä»çˆ¶æ¯èŠ‚ç‚¹ç§»é™¤çš„åŠ¨ä½œã€‚é‚£æ ·ä¼šå¤§å¤§å½±å“å…¶è¡¨ç°ã€‚</p>
<p>ç¬¬äºŒï¼Œä½ å¯ä»¥é€šè¿‡æ ¹æ®ä½ çš„æƒé™ç»“æ„æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®ä»¥è½»æ˜“åœ°é¿å…è¿™äº›çº§è”è§„åˆ™çš„é—®é¢˜ã€‚å°†ä½ çš„æ•°æ®åµŒå¥—åœ¨è¿™æ ·å‘½åçš„é«˜çº§åˆ«çš„èŠ‚ç‚¹ä¸­ï¼Œæ¯”å¦‚ â€œadminâ€ã€â€œuserReadableâ€ã€â€œuserWritableâ€ æˆ–è€… â€œuserOwnedâ€ã€‚å°†æœ‰ç€ç±»ä¼¼å®‰å…¨éœ€æ±‚çš„å¯¹è±¡åˆ†ç»„åœ¨é«˜çº§åˆ«èŠ‚ç‚¹ä¸‹ä¼šæœ‰æ•ˆåœ°é™ä½ä½ éœ€è¦ç»´æŠ¤çš„å®‰å…¨è§„åˆ™æ•°é‡ã€‚</p>
<p><strong>å…³äºéªŒè¯è§„åˆ™å°çªé—¨ï¼š</strong>æˆ‘ä»¬ä¹‹åä¼šè°ˆåˆ°éªŒè¯è§„åˆ™ã€‚éªŒè¯è§„åˆ™ç”¨äºé˜»æ­¢ç”¨äºçˆ¶æ¯èŠ‚ç‚¹å†™æƒé™çš„ç”¨æˆ·å†™å…¥å…¶å­èŠ‚ç‚¹ã€‚è¿™æ ·çš„è¯ï¼Œå½“ä½ æˆäºˆäº†å†™æƒé™ç»™ <code>userOwned/preferences/{uid}</code>ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€æ¡éªŒè¯è§„åˆ™ï¼Œæ¯”å¦‚è¯´ <code>userOwned/preferences/{uid}/isAdmin</code>ï¼Œè¿™æ ·å°±å¯ä»¥é˜»æ­¢ç”¨æˆ·æ›´æ–° <code>isAdmin</code> è¿™ä¸ªå­èŠ‚ç‚¹ã€‚</p>
<p>è¿™ç§æ–¹æ³•ä¼šå¸¦æ¥ä¸€äº›åæœï¼ŒåŸºæœ¬ä¸Šä»»ä½•åœ¨ <code>userOwned/preferences/{uid}</code> çš„ <code>ref.set()</code> çš„æ“ä½œéƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºä½ ä¸èƒ½é‡å†™ <code>isAdmin</code> è¿™ä¸ªå­èŠ‚ç‚¹â€¦ä½ éœ€è¦ä½¿ç”¨ <code>ref.update()</code> æ¥å•ç‹¬æ›´æ–°æ¯ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚å°† <code>isAdmin</code> èŠ‚ç‚¹ç§»åˆ°ä½ çš„æ•°æ®ç»“æ„çš„å…¶ä»–æœ¬å°±æ˜¯ç”¨æˆ·å¯è¯»ä¸å¯å†™çš„éƒ¨åˆ†ä¼šæ¯”è¾ƒè½»æ¾ã€‚ä½ å¯ä»¥å°†å…¶å‘½åä¸º <code>userReadable/preferences/{uid}/isAdmin</code>ã€‚</p>
<h2 id="ç¤ºä¾‹æ•°æ®ç»“æ„"><a href="#ç¤ºä¾‹æ•°æ®ç»“æ„" class="headerlink" title="ç¤ºä¾‹æ•°æ®ç»“æ„"></a>ç¤ºä¾‹æ•°æ®ç»“æ„</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹æ•°æ®ç»“æ„æ¥ç»§ç»­å‰©ä¸‹çš„å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;users&quot;: &#123;</span><br><span class="line">    &quot;kanyesUID&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Kanye West&quot;,</span><br><span class="line">      &quot;email&quot;: &quot;kwest@gmail.com&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;taylorsUID&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Taylor Swift&quot;,</span><br><span class="line">      &quot;email&quot;: &quot;tswift@gmail.com&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;seacrestsUID&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Ryan Seacrest&quot;,</span><br><span class="line">      &quot;email&quot;: &quot;rseacrest@gmail.com&quot;,</span><br><span class="line">      &quot;isAdmin&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;userReadable&quot;: &#123;</span><br><span class="line">    &quot;tweets&quot;: &#123;</span><br><span class="line">      &quot;kanyesUID&quot;: &#123;</span><br><span class="line">        &quot;aPushKey&quot;: &#123;</span><br><span class="line">          &quot;text&quot;: &quot;Imma let you finish, but...&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;bPushKey&quot;: &#123;</span><br><span class="line">          &quot;text&quot;: &quot;Queen B shoulda received this award...&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;retweets&quot;: &#123;</span><br><span class="line">      &quot;taylorsUID&quot;: &#123;</span><br><span class="line">        &quot;cPushKey&quot;: &#123;</span><br><span class="line">          &quot;key&quot;: &quot;aPushKey&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;Imma let you finish, but...&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;dPushKey&quot;: &#123;</span><br><span class="line">          &quot;key&quot;: &quot;bPushKey&quot;,</span><br><span class="line">          &quot;text&quot;: &quot;Queen B shoulda received this award...&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;userWriteable&quot;: &#123;</span><br><span class="line">    &quot;tweetQueue&quot;: &#123;</span><br><span class="line">      &quot;taylorsUID&quot;: &#123;</span><br><span class="line">        &quot;text&quot;: &quot;I ğŸ’• you all like Kanye ğŸ’•&apos;s Kanye&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;userOwned&quot;: &#123;</span><br><span class="line">    &quot;preferences&quot;: &#123;</span><br><span class="line">      &quot;kanyesUID&quot;: &#123;</span><br><span class="line">        &quot;loveKanye&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;taylorsUID&quot;: &#123;</span><br><span class="line">        &quot;listenToHaters&quot;: false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™äº›æ•°æ®æœ‰å››ä¸ªé¡¶çº§èŠ‚ç‚¹ï¼š</p>
<ol>
<li>users</li>
<li>userReadable</li>
<li>userWriteable</li>
<li>userOwned</li>
</ol>
<p>æˆ‘ä»¬æœ‰ä¸¤ä¸ªç”¨æˆ·ï¼š</p>
<ol>
<li>Kanye West</li>
<li>Taylor Swift</li>
</ol>
<p><code>users</code> èŠ‚ç‚¹åŒ…å«äº†åŸºç¡€çš„ç”¨æˆ·æ•°æ®ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯é‚®ç®±åœ°å€ã€‚æˆ‘ä»¬è®¾æƒ³å½“ Kanye ç™»é™†äº†æˆ‘ä»¬çš„ appï¼Œä»–çš„ uid æ˜¯ <code>kanyesUID</code>ã€‚ç±»ä¼¼çš„ï¼ŒTaylor å¾—åˆ°äº†è¿™ä¸ª uid <code>taylorsUID</code>ã€‚è¿™äº› UID ä¼šç»„æˆæˆ‘ä»¬å®‰å…¨æ¨¡å‹çš„åŸºç¡€ã€‚</p>
<p>é¦–å…ˆï¼Œæ¥è®©æ¯ä¸ªç”¨æˆ·æ•°æ®<code>ç”¨æˆ·å¯è¯»</code>â€¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;rules&quot;: &#123;</span><br><span class="line">    &quot;users&quot;: &#123;</span><br><span class="line">      &quot;$uid&quot;: &#123;</span><br><span class="line">        &quot;.read&quot;: &quot;auth.uid == $uid&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨æ ¹èŠ‚ç‚¹ <code>rules</code> ä¸ŠåŠ äº†ä¸€ä¸ª <code>users</code> èŠ‚ç‚¹ã€‚ä»»ä½•ç›´æ¥å†™åœ¨ <code>users</code> èŠ‚ç‚¹ä¸‹é¢çš„è§„åˆ™ä¼šè¢«åº”ç”¨åˆ°æ‰€æœ‰å…¶å­èŠ‚ç‚¹ä¸­â€¦ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³åœ¨ <code>users</code> èŠ‚ç‚¹ä¸Šè®¾ç½®è§„åˆ™ã€‚æˆ‘ä»¬å¸Œæœ›ç»™æ¯ä¸€ä¸ªç‹¬ç«‹çš„ç”¨æˆ·åŸºäºå…¶ uid è®¾ç½®è§„åˆ™ï¼Œå› æ­¤æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé€šé…èŠ‚ç‚¹ï¼Œ<code>$uid</code>ã€‚æˆ‘ä»¬å¯ä»¥éšæ„å‘½åé€šé…èŠ‚ç‚¹ï¼Œåªè¦å…¶å¼€å§‹å­—ç¬¦æ˜¯ <code>$</code>ã€‚æœ€ä½³å®è·µæ˜¯ç»™ä»–ä»¬å‘½åä¸€äº›æè¿°æ€§çš„ä¸œè¥¿ï¼Œå› æ­¤æˆ‘ä»¬å°†è¿™ä¸ªé€šé…èŠ‚ç‚¹å‘½åä¸º <code>$uid</code>ï¼Œå› ä¸ºæ¯ä¸ªç”¨æˆ·éƒ½å°†ä¿å­˜åœ¨å…¶ uid ä¸‹ã€‚</p>
<p>é€šé…èŠ‚ç‚¹åº”ç”¨äºæ‰€æœ‰å…¶ä»–æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºçš„èŠ‚ç‚¹ä¸Šã€‚æœ‰ç‚¹ç³Šæ¶‚äº†ï¼Ÿçœ‹çœ‹è¿™ä¸ªã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &quot;users&quot;: &#123;</span><br><span class="line">      &quot;$uid&quot;: &#123;</span><br><span class="line">        &quot;.read&quot;: &quot;auth.uid == $uid&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;taylorsUID&quot;: &#123;</span><br><span class="line">        &quot;.read&quot;: &quot;auth.uid == &apos;taylorsUID&apos;&quot;,</span><br><span class="line">        &quot;.write&quot;: &quot;auth.uid == &apos;taylorsUID&apos;&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°æˆ‘ä»¬å¹²äº†å•¥å—ï¼Ÿæˆ‘ä»¬ä»…èµ‹äºˆäº† <code>$uid</code> èŠ‚ç‚¹ <code>.read</code> æƒé™ï¼Œä½†æ˜¯æˆ‘ä»¬ç»™äº† Taylor è¿™ä¸ªç”¨æˆ· <code>.read</code> å’Œ <code>.write</code> æƒé™ã€‚</p>
<p>ä½ å¯èƒ½åœ¨æƒ³ <code>auth.uid == $uid</code> æ˜¯ä»€ä¹ˆæ„æ€ã€‚å½“ç”¨æˆ·é€šè¿‡ Firebase Authentication è®¤è¯æˆåŠŸæ—¶ï¼Œè¿™ä¸ªç”¨æˆ·ä¼šä»ç³»ç»Ÿè·å¾—ä¸€ä¸ª uidï¼Œå®ƒå¯ä»¥é€šè¿‡ <code>auth.uid</code> è®¿é—®åˆ°ã€‚å› æ­¤å½“ Kanye åœ¨ç³»ç»Ÿä¸­è®¤è¯æ—¶ï¼Œä»–çš„ <code>auth.uid</code> ç­‰äº <code>kanyesUID</code>ã€‚æˆ‘ä»¬å¯ä»¥å°† <code>auth.uid</code> å’Œ <code>$uid</code> æ¯”è¾ƒæ¥æˆäºˆç”¨æˆ·å¯¹ä»–ä»¬è‡ªå·±èŠ‚ç‚¹çš„è¯»æƒé™ï¼Œä½†å¯¹å…¶ä»–èŠ‚ç‚¹æ— æƒé™ã€‚ä¹Ÿå¯ä»¥ç›´æ¥å’Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼š<code>&quot;.read&quot;: &quot;auth.uid == &#39;taylorsUID&#39;&quot;</code>ã€‚</p>
<h2 id="ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢"><a href="#ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢" class="headerlink" title="ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢"></a>ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢</h2><p>è®¾æƒ³æˆ‘ä»¬çš„ app åœ¨è¿›è¡Œè¿™æ ·ä¸€ä¸ªæŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ref.child(&apos;users&apos;).orderByChild(&apos;email&apos;).equalTo(&apos;kwest@gmail.com&apos;).once(&apos;value&apos;, callback);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨è¦æ±‚ firebase æ¥ä» <code>users</code> èŠ‚ç‚¹ä¸­æœç´¢ä¸€ä¸ª <code>email</code> èŠ‚ç‚¹ä¸º <code>kwest@gmail.com</code> çš„å­èŠ‚ç‚¹ã€‚æ ¹æ®æˆ‘ä»¬æ•°æ®åº“çš„å¤§å°ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªéå¸¸å·¨é‡ä¸”ç¼“æ…¢çš„æŸ¥è¯¢ï¼Œå› æ­¤ Firebase ç»™æˆ‘ä»¬æä¾›äº†æŒ‡å®šå­èŠ‚ç‚¹çš„é«˜æ€§èƒ½ç´¢å¼•ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ› Firebase é€šè¿‡ <code>email</code> è¿™ä¸ªå­èŠ‚ç‚¹ç´¢å¼•æ‰€æœ‰ç”¨æˆ·ã€‚åšæ³•å¾ˆç®€å•ï¼Œ<code>&quot;.indexOn&quot;: &quot;email&quot;</code>ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &quot;users&quot;: &#123;</span><br><span class="line">      &quot;$uid&quot;: &#123;</span><br><span class="line">        &quot;.read&quot;: &quot;auth.uid == $uid&quot;,</span><br><span class="line">        &quot;.indexOn&quot;: [</span><br><span class="line">          &quot;email&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬è¿˜è¦ç´¢å¼•å…¶ä»–å­èŠ‚ç‚¹ï¼Œæ¯”å¦‚è¯´ <code>users/{$user}/username</code>ï¼Œæˆ‘ä»¬çš„è§„åˆ™å°±è¿™ä¹ˆå†™ <code>&quot;.indexOn&quot;: [&quot;email&quot;, &quot;username&quot;]</code>ã€‚</p>
<h2 id="éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™"><a href="#éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™" class="headerlink" title="éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™"></a>éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™</h2><p>è®©æˆ‘ä»¬å°†è¿™ä¸ªè®¾æƒ³çš„ç±»ä¼¼ twitter çš„ app çš„ç¬¬ä¸‰ä¸ªç”¨æˆ·ç§°ä¸ºï¼š Ryan Seacrestã€‚Ryan çš„è´¦å·æ˜¯ç®¡ç†å‘˜è´¦å·ã€‚æ³¨æ„åˆ°äº†ä»–çš„ç”¨æˆ·è´¦å·é‡Œçš„ <code>&quot;isAdmin&quot;: true</code> å±æ€§äº†å—ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &quot;users&quot;: &#123;</span><br><span class="line">      &quot;$uid&quot;: &#123;</span><br><span class="line">        &quot;.read&quot;: &quot;auth.uid == $uid || root.child(&apos;users&apos;).child(auth.uid).child(&apos;isAdmin&apos;).val() == true&quot;,</span><br><span class="line">        &quot;.write&quot;: &quot;root.child(&apos;users&apos;).child(auth.uid).child(&apos;isAdmin&apos;).val() == true&quot;,</span><br><span class="line">        &quot;.indexOn&quot;: [</span><br><span class="line">          &quot;email&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”¨æˆ·ä»¬ä»ç„¶å¯ä»¥è¯»å–ä»–ä»¬è‡ªå·±çš„è´¦æˆ·æ•°æ®ï¼Œä¸è¿‡æˆ‘ä»¬åˆšåˆšç»™æ‰€æœ‰æœ‰ <code>isAdmin</code> æ ‡è¯†çš„ç”¨æˆ·èµ‹äºˆäº†è¯»å†™æƒé™ã€‚ç”¨äºæ£€æµ‹è¿™ä¸ªæ ‡è¯†çš„è§„åˆ™æ˜¯ <code>root.child(â€˜usersâ€™).child(auth.uid).child(â€˜isAdminâ€™).val()</code>ã€‚<code>root</code> å¯¹è±¡ä»£è¡¨æˆ‘ä»¬çš„ Firebase çš„æ ¹èŠ‚ç‚¹ã€‚æ¥ç€æˆ‘ä»¬è°ƒç”¨ <code>.child(&#39;nodeName&#39;)</code> æ¥å‘ä¸‹æ‰¾åˆ°æˆ‘ä»¬çš„è®¤è¯è¿‡çš„ç”¨æˆ·çš„ <code>isAdmin</code> èŠ‚ç‚¹ã€‚çœ‹åˆ°äº†æ˜¯æ€ä¹ˆä½¿ç”¨ <code>auth.uid</code> æ¥æ·±å…¥åˆ°è¿™ä¸ªè®¤è¯ç”¨æˆ·çš„å—ï¼Ÿæ˜¯ï¼Œè¿™æ ·åšå¾ˆèªæ˜ã€‚å®ƒåŒæ—¶ä¹Ÿæ‚„æ‚„åœ°è®©ä»»ä½•æ²¡æœ‰è®¤è¯çš„ç”¨æˆ·è®¿é—®å¤±è´¥ï¼Œè¿™æ ·è¿™äº›èŠ‚ç‚¹å°±å®‰å…¨äº†ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè°ƒç”¨ <code>.val()</code> æ¥è·å–å®ƒçš„å€¼ã€‚è¿™è®©äººæƒ³èµ·æˆ‘ä»¬æ˜¯å¦‚ä½•ä½¿ç”¨ Firebase JavaScript SDK æ¥å¤„ç†æ•°æ®å¿«ç…§ï¼Œåº”è¯¥çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰å§ã€‚</p>
<p>å¦å¤–ä¸€ç‚¹ï¼šè¿˜æœ‰åˆ«çš„éå†æ ‘çš„æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥è°ƒç”¨ <code>data.parent().child(auth.uid).val()</code> æ¥ä»æˆ‘ä»¬æ­£åœ¨ä¿æŠ¤çš„èŠ‚ç‚¹å¾€ä¸Šèµ°åˆ° <code>users</code> å†å¾€ä¸‹èµ°ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå¾ˆå®ç”¨ï¼Œä½†æ˜¯ä» <code>root</code> å¼€å§‹éå†ä¼šæ›´å¯é ï¼Œå› ä¸º <code>root</code> å¯¹äºæˆ‘ä»¬ app çš„ä»»ä½•éƒ¨åˆ†éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¸ºäº†å®‰å…¨ï¼Œè¿˜æ˜¯ç”¨ <code>root</code> å§ã€‚</p>
<h2 id="ä½¿ç”¨-Bolt-è§„åˆ™ç¼–è¯‘å™¨æ¥-streamline-ä½ çš„è§„åˆ™"><a href="#ä½¿ç”¨-Bolt-è§„åˆ™ç¼–è¯‘å™¨æ¥-streamline-ä½ çš„è§„åˆ™" class="headerlink" title="ä½¿ç”¨ Bolt è§„åˆ™ç¼–è¯‘å™¨æ¥ streamline ä½ çš„è§„åˆ™"></a>ä½¿ç”¨ Bolt è§„åˆ™ç¼–è¯‘å™¨æ¥ streamline ä½ çš„è§„åˆ™</h2><p>åˆ°ç›®å‰æˆ‘ä»¬ä¸€ç›´åœ¨ç›´æ¥ä¿®æ”¹æˆ‘ä»¬çš„è§„åˆ™ JSON å¯¹è±¡ã€‚è¿™æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¯èƒ½æ€»æ˜¯åœ¨é‡å¤å¤åˆ¶ç²˜è´´æ“ä½œã€‚Firebase å›¢é˜Ÿä¹Ÿå·²ç»ç–²äºå¤åˆ¶ç²˜è´´ï¼Œäºæ˜¯å†™äº†ä¸€ä¸ªå’Œ <a href="https://github.com/firebase/firebase-tools" target="_blank" rel="external">firebase-tools</a> CLI ç»“åˆæ¥è®©è§„åˆ™æ›´å®¹æ˜“å†™çš„ç¼–è¯‘å™¨ã€‚</p>
<p>ä½ éœ€è¦é€šè¿‡ <code>npm install -g firebase-bolt</code> å®‰è£… Bolt å¹¶ä¸”åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªå‘½åä¸ºç±»ä¼¼ <code>security-rules.bolt</code> çš„æ–‡ä»¶ã€‚ç„¶åä½ å¯ä»¥æ‰§è¡Œ <code>firebase-bolt sevurity-rules.bolt</code>ï¼Œå®ƒä¼šç¼–è¯‘ä½ çš„ Bolt è§„åˆ™åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¹¶å‘½åä¸º <code>firebase-rules.json</code>ã€‚ç”Ÿæˆçš„ JSON å¯èƒ½ä¼šæ¯”æˆ‘ä»¬ä¹‹å‰å†™çš„ JSON æ›´å•°å—¦ï¼Œä½†æ˜¯ Bolt è¯­æ³•å¾ˆå¥½ç”¨ç²¾ç‚¼ã€‚è¯¦è§ <a href="https://github.com/firebase/bolt/blob/master/docs/language.md" target="_blank" rel="external">Bolt language reference</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function isUser (auth, userKey) &#123;</span><br><span class="line">  return uid == userKey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isAdmin (auth) &#123;</span><br><span class="line">  return root.child(&apos;users&apos;).child(auth.uid).child(&apos;isAdmin&apos;).val() == true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">path /users/&#123;uid&#125; &#123;</span><br><span class="line">  read() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">  write() &#123; isAdmin(auth) &#125;</span><br><span class="line">  index() &#123; [&quot;email&quot;] &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">path /userReadable/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line">  read() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">  write() &#123; isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">path /userWriteable/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line">  read() &#123; isAdmin(auth) &#125;</span><br><span class="line">  write() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">path /userOwned/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line">  read() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">  write() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„æˆ‘ä»¬æ˜¯æ€æ ·å†™åœ¨é¡¶éƒ¨çš„ä¸¤ä¸ªæ–¹æ³•çš„ï¼š<code>isUser(auth, uid)</code> å’Œ <code>isAdmin(auth)</code>ã€‚è¿™äº›æ–¹æ³•ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯è¶…çº§æœ‰ç”¨ã€‚å®ƒä»¬è®©æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„è§„åˆ™ä¸­é‡ç”¨ä¸€äº›é€»è¾‘ã€‚</p>
<p>ä¸‹ä¸€ä¸ªéƒ¨åˆ†æœ‰ä¸€å † <code>path</code> å—ã€‚ä½¿ç”¨ <code>/[nodeName]/</code> æ¥é€šé…ä½ çš„è·¯å¾„ã€‚è¿™äº›é€šé…å€¼åœ¨è¿™äº› path çš„èŒƒå›´å†…éƒ½æ˜¯å¯ç”¨çš„ï¼Œå› æ­¤ä½ å¯ä» <code>/userReadable/objectType/uid</code> è·å– <code>uid</code>ï¼Œå¹¶ä¼ ç»™ <code>read() { isUser(auth, uid) || isAdmin(auth) }</code>ã€‚</p>
<h2 id="æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®"><a href="#æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®" class="headerlink" title="æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®"></a>æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®</h2><p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†æœ‰ä¸‰ä¸ªé¡¶çº§èŠ‚ç‚¹è¢«å‘½åä¸ºï¼š</p>
<ul>
<li>userReadable</li>
<li>userWriteable</li>
<li>userOwned</li>
</ul>
<p>ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬æˆäºˆäº†ç”¨æˆ·è¯»æƒé™ç»™ <code>userReadable</code> çš„å­èŠ‚ç‚¹ã€å†™æƒé™ç»™ <code>userWriteable</code> çš„å­èŠ‚ç‚¹ä»¥åŠå®Œæ•´çš„è¯»å†™æƒé™ç»™ <code>userOwned</code> çš„å­èŠ‚ç‚¹ã€‚</p>
<p>è¿™æ˜¯åªä¸€ä¸ªéšæ„çš„æ•°æ®ç»“æ„â€¦æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸‰ä¸ªèŠ‚ç‚¹å‘½åä¸ºéšä¾¿ä»€ä¹ˆã€‚ä¸è¿‡å‘½åä¸ºæè¿°æ€§çš„åå­—ä¼šæ›´å¥½ã€‚æ¥ç€æˆ‘ä»¬ç”¨äº†é€šé…è·¯å¾„ï¼ˆ<code>path/userReadable/objectType/uid</code>ï¼‰æ¥ç»™ä¸€ç»„ä¸€ç»„çš„å¯¹è±¡åº”ç”¨è§„åˆ™ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬ä¸éœ€è¦ç»™æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ç±»å¯¹è±¡éƒ½ç¼–å†™è§„åˆ™ã€‚æˆ‘ä»¬åªéœ€è¦å°†è¿™äº›å¯¹è±¡åµŒå¥—åœ¨æ°å½“çš„æƒé™èŠ‚ç‚¹ä¸‹å°±å¥½äº†ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &quot;userOwned&quot;: &#123;</span><br><span class="line">      &quot;preferences&quot;: &#123;</span><br><span class="line">        &quot;kanyesUID&quot;: &#123;</span><br><span class="line">          &quot;loveKanye&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;taylorsUID&quot;: &#123;</span><br><span class="line">          &quot;listenToHaters&quot;: false</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>userOwned</code> èŠ‚ç‚¹æœ‰å¯¹æ‰€æœ‰åœ¨åŒ¹é…çš„ç”¨æˆ· uid ä¸‹çš„å¯¹è±¡çš„è¯»å†™æƒé™ã€‚å› æ­¤åªæœ‰ Kanye å¯ä»¥è®¿é—® <code>/userOwned/preferences/kanyesUID</code>ï¼Œå¹¶ä¸” Kanye æœ‰å®Œæ•´çš„è¯»å†™æƒé™ã€‚</p>
<p>è¦è®°å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¶å®šå¦ä¸€æ¡åŒ¹é…è·¯å¾„è§„åˆ™æ¥é‡å†™ç»Ÿé…è§„åˆ™ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">path /userOwned/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line"> read() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">  write() &#123; isUser(auth, uid) || isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br><span class="line">path /userOwned/grammyNominations/taylorsUID &#123;</span><br><span class="line">  read() &#123; true &#125;</span><br><span class="line">  write() &#123; uid == kanyesUID &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ¡è§„åˆ™é‡å†™äº† <code>/userOwned/{objectType}/uid</code> å¹¶ä»…æˆäºˆ Kanye å¯¹äº Taylorâ€™s Grammy Nominations çš„å†™æƒé™ã€‚åŒæ—¶ä¹Ÿè®©è¿™ä¸ªåˆ—è¡¨å…¨ä¸–ç•Œå¯è¯»ï¼Œå› æ­¤ä»»ä½•ç½‘ç«™æˆ–è€…ç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡ <code>https://&lt;some firebase&gt;.firebaseio.com/userOwned/grammyNominations/taylorsUID.json</code> æ¥è·å–è¿™ä¸ªåˆ—è¡¨ã€‚</p>
<h2 id="ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®"><a href="#ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®" class="headerlink" title="ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®"></a>ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®</h2><p><code>read()</code>ã€<code>write()</code> ä»¥åŠ <code>index()</code> è¦†ç›–äº†å¤§å¤šæ•°ä½¿ç”¨æƒ…å†µï¼Œä½†æœ‰æ—¶å€™ä½ å¯èƒ½éœ€è¦æ›´å¤šå¯¹äºè¦å†™å…¥çš„æ•°æ®çš„æ›´ç»†èŠ‚çš„æ§åˆ¶ã€‚</p>
<p>Bolt å…è®¸ä½ åˆ›å»ºå¯ä»¥åœ¨å¤šèŠ‚ç‚¹é—´é‡ç”¨çš„æ•°æ®ç±»å‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">path /userOwned/preferences/&#123;uid&#125; is Preferences;</span><br><span class="line">type Preferences &#123;</span><br><span class="line"> validate() &#123; this.excuse.length &lt; 20 &amp;&amp; this.respectRating &lt; 5 &#125;</span><br><span class="line">  useAutotune: Boolean,</span><br><span class="line">  excuse: String,</span><br><span class="line">  respectRating: Number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†éªŒè¯è§„åˆ™å’Œ <code>validate()</code> æ··åˆåœ¨ä¸€èµ·ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å°†ç±»å‹å’Œè¯»å†™æƒé™æ··åˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">path /userOwned/preferences/&#123;uid&#125; is Preferences &#123;</span><br><span class="line"> read() &#123; isUser(auth, uid) &#125;</span><br><span class="line"> write() &#123; isUser(auth, uid) &#125;</span><br><span class="line">&#125;</span><br><span class="line">type Preferences &#123;</span><br><span class="line">  validate() &#123; this.excuse.length &lt; 20 &amp;&amp; this.respectRating &lt; 5 &#125;</span><br><span class="line">  useAutotune: Boolean,</span><br><span class="line">  excuse: String,</span><br><span class="line">  respectRating: Number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ«åè§„åˆ™"><a href="#åˆ«åè§„åˆ™" class="headerlink" title="åˆ«åè§„åˆ™"></a>åˆ«åè§„åˆ™</h2><p>ç›®å‰ä¸ºæ­¢æˆ‘ä»¬ä»…ä»…ä½¿ç”¨äº† <code>read()</code>ã€<code>write()</code>ã€<code>index()</code> å’Œ <code>validate()</code>ï¼Œä½†æ˜¯ Bolt æ”¯æŒå…¶å®ƒä¸‰ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>create()</li>
<li>update()</li>
<li>delete()</li>
</ul>
<p>è¿™äº›æ–¹æ³•éƒ½æ˜¯ <code>write()</code> çš„åˆ«åï¼Œå› æ­¤ä»–ä»¬ä¸èƒ½å’Œ <code>write()</code> ä¸€èµ·æ··åˆåˆ°åŒä¸€ä¸ª <code>path</code> å—ã€‚å®ƒä»¬åˆ›å»ºäº†åˆ†åˆ«ä»…é€‚ç”¨äºæ–°å»ºã€æ›´æ–°æˆ–è€…åˆ é™¤æ“ä½œçš„ <code>write()</code> è§„åˆ™ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¯å¦‚æœä½ æƒ³è¦ç»™ç”¨æˆ·æƒé™åˆ›å»ºå¯¹è±¡ä½†æ˜¯ä¸èƒ½ç¼–è¾‘æˆ–è€…åˆ é™¤ï¼Œ<code>create()</code> ä¼šç”Ÿæˆå¤„ç†è¿™ç§æƒ…å†µçš„ <code>write()</code> è§„åˆ™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">path /dropbox/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line"> create() &#123; isUser(auth, uid) &#125;</span><br><span class="line">  read() &#123; isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">path /editable/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line">  update() &#123; isUser(auth, uid) &#125;</span><br><span class="line">  read() &#123; isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">path /deleteable/&#123;objectType&#125;/&#123;uid&#125; &#123;</span><br><span class="line">  delete() &#123; isUser(auth, uid) &#125;</span><br><span class="line">  read() &#123; isAdmin(auth) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="éƒ¨ç½²ä½ çš„è§„åˆ™"><a href="#éƒ¨ç½²ä½ çš„è§„åˆ™" class="headerlink" title="éƒ¨ç½²ä½ çš„è§„åˆ™"></a>éƒ¨ç½²ä½ çš„è§„åˆ™</h2><p>æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>æ‰§è¡Œ <code>firebase-bolt my-rules-file.bolt</code> æ¥åˆ›å»º <code>my-rules-files.json</code>ï¼Œç„¶åä½ å¯ä»¥å¤åˆ¶ç²˜è´´åˆ°ä½ çš„å®æ—¶æ•°æ®åº“è§„åˆ™æ§åˆ¶å°ã€‚</li>
<li>æ‰§è¡Œ <code>firebase-tools init</code> æ¥åˆ›å»ºä½ çš„ <code>firebase.json</code> æ‰˜ç®¡æ–‡ä»¶ï¼Œç„¶ååœ¨ <code>database.rules</code> åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹æ¥æŒ‡å‘ä½ çš„ <code>.bolt</code> æˆ–è€… â€˜.jsonâ€™ è§„åˆ™æ–‡ä»¶ã€‚æ¥ç€è¿è¡Œ <code>firebase deploy --only rules</code> æ¥é€šè¿‡å‘½ä»¤è¡Œéƒ¨ç½²ä½ çš„è§„åˆ™ã€‚</li>
</ol>
<p>æˆ‘ä»¬ç¨åä¼šè°ˆåˆ° <code>firebase.json</code> è¿™ä¸ªé€‰é¡¹ã€‚ç°åœ¨ï¼Œçœ‹çœ‹ä¸‹é¢è¿™ä¸ª <code>firebase.sjon</code> ä¾‹å­å¹¶ä¸”ç•™æ„ <code>database.rules</code> è¿™ä¸ªèŠ‚ç‚¹ã€‚å®ƒæŒ‡å‘äº†ä¸€ä¸ªè®°å½•äº†æˆ‘çš„ bolt è§„åˆ™çš„å«åš <code>database.rules.bolt</code> çš„æ–‡ä»¶ã€‚å¦‚æœè¿™ä¸ªæ–‡ä»¶è¢«å‘½åä¸º <code>database.rules.json</code>ï¼Œfirebase ä¼šçŸ¥é“æˆ‘çš„è§„åˆ™æ˜¯ JSON æ ¼å¼ï¼Œä¸è¿‡å› ä¸ºæˆ‘å‘½åäº†ä¸º <code>.bolt</code>ï¼Œå®ƒä¼šåœ¨ä¸Šä¼ å…¶åˆ°æˆ‘çš„ Firebase äº‘ä¸Šä¹‹å‰è‡ªåŠ¨å°†å…¶ä¼ ç»™ <code>firebase-bolt</code> ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// Eample firebase.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;database&quot;: &#123;</span><br><span class="line">    &quot;rules&quot;: &quot;database.rules.bolt&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;hosting&quot;: &#123;</span><br><span class="line">    &quot;public&quot;: &quot;dist&quot;,</span><br><span class="line">    &quot;rewrites&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;source&quot;: &quot;/app/**/*&quot;,</span><br><span class="line">        &quot;destination&quot;: &quot;/index.html&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;ignore&quot;: [</span><br><span class="line">      &quot;firebase.json&quot;,</span><br><span class="line">      &quot;**/.*&quot;,</span><br><span class="line">      &quot;**/node_modules/**&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;functions&quot;: &#123;</span><br><span class="line">    &quot;.source&quot;: &quot;functions&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>å·®ä¸å¤šå°±è¿™æ ·äº†ã€‚</p>
<p>å…·ä½“ç»ƒä¹ è§åŸæ–‡å§ ï¼šDã€‚</p>

  </div>
  <script type="text/javascript">
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'http://7u2sl0.com1.z0.glb.clouddn.com/dbfmplayer.js';
    (d.head || d.body).appendChild(s);
    })();
  </script>
</article>

<div class="blog-post-comments">
  <div class="wildfire_thread"></div>
</div>


    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/index.html">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/cheng-kang">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„"><span class="toc-number">1.</span> <span class="toc-text">å®‰å…¨è§„åˆ™æ˜¯åŸºäºèŠ‚ç‚¹çš„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#çº§è”è§„åˆ™"><span class="toc-number">2.</span> <span class="toc-text">çº§è”è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¤ºä¾‹æ•°æ®ç»“æ„"><span class="toc-number">3.</span> <span class="toc-text">ç¤ºä¾‹æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢"><span class="toc-number">4.</span> <span class="toc-text">ç´¢å¼•å­é”®æ¥åŠ å¿«æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™"><span class="toc-number">5.</span> <span class="toc-text">éå†æ ‘ä»¥è·å–ç»†èŠ‚æƒé™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä½¿ç”¨-Bolt-è§„åˆ™ç¼–è¯‘å™¨æ¥-streamline-ä½ çš„è§„åˆ™"><span class="toc-number">6.</span> <span class="toc-text">ä½¿ç”¨ Bolt è§„åˆ™ç¼–è¯‘å™¨æ¥ streamline ä½ çš„è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®"><span class="toc-number">7.</span> <span class="toc-text">æ ¹æ®è¯»å†™æƒé™æ¥ç»“æ„åŒ–ä½ çš„æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®"><span class="toc-number">8.</span> <span class="toc-text">ä¿è¯å®‰å…¨æ€§çš„åŒæ—¶éªŒè¯ä½ çš„æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ«åè§„åˆ™"><span class="toc-number">9.</span> <span class="toc-text">åˆ«åè§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#éƒ¨ç½²ä½ çš„è§„åˆ™"><span class="toc-number">10.</span> <span class="toc-text">éƒ¨ç½²ä½ çš„è§„åˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»ƒä¹ "><span class="toc-number">11.</span> <span class="toc-text">ç»ƒä¹ </span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://chengkang.me/2017/09/30/firebase-security-rules/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://chengkang.me/2017/09/30/firebase-security-rules/&text=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://chengkang.me/2017/09/30/firebase-security-rules/&is_video=false&description=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Firebase å®‰å…¨ä¸è§„åˆ™&body=Check out this article: http://chengkang.me/2017/09/30/firebase-security-rules/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://chengkang.me/2017/09/30/firebase-security-rules/&title=Firebase å®‰å…¨ä¸è§„åˆ™"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://chengkang.me/2017/09/30/firebase-security-rules/&name=Firebase å®‰å…¨ä¸è§„åˆ™&description=&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://howtofirebase.com/firebase-security-rules-88d94606ce4a&quot;&gt;Firebase Security &amp;amp; Rules&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Firebase æ˜¯ä¸€ä¸ªå¯ä»¥ä»ä»»æ„å»ºç«‹è¿æ¥äº†çš„å®¢æˆ·ç«¯è®¿é—®çš„äº‘æ•°æ®åº“ã€‚å› ä¸ºä»»æ„å®¢æˆ·ç«¯éƒ½å¯ä»¥è¿æ¥åˆ°ä»»æ„ Firebase [æ•°æ®åº“]ï¼Œä½ &lt;strong&gt;å¿…é¡»&lt;/strong&gt;åˆ¶å®šå®‰å…¨è§„åˆ™æ¥ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å†™ä¸å¥½æ°å½“çš„å®‰å…¨è§„åˆ™ä¼šè®©ä½ æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼ä½ é©¬ä¸Šå°±èƒ½å­¦åˆ°å¸®ä½ ç´§ç´§é”ä½ä½ çš„æ•°æ®çš„å…¨éƒ¨çŸ¥è¯†äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¿æŒå®‰å…¨è§„åˆ™ç®€æ´ã€‚å®‰å…¨è§„åˆ™å¯èƒ½å˜å¾—è¿‡äºå¤æ‚ï¼Œå¹¶å¾ˆå¿«å˜å¾—ä¸å—æ§åˆ¶å¦‚æœä½ çš„æ•°æ®ç»“æ„ä¸å¤Ÿè®¾è®¡å……åˆ†çš„è¯ã€‚è¿™ç¯‡æ–‡ç« å±•ç¤ºäº†ä¸€äº›â€œæœ€ä½³â€å®è·µã€‚ä¼°è®¡ä½ ä¼šè®²å…¶ç•¥ä½œä¿®æ”¹å°±ç”¨åˆ°ä½ çš„ç”Ÿäº§åº”ç”¨ä¸­å»â€¦â€¦å¦‚æœä½ é€‰æ‹©é‡‡ç”¨è¿™äº›æ¨¡å¼ï¼Œè®°å¾—ä»”ç»†æƒ³æƒ³èƒŒåçš„å«ä¹‰å°±è¡Œã€‚ç¡®ä¿åœ¨ä½ å¼€å§‹æäº‹ä¹‹å‰ï¼Œè¯»äº†æ•´ç¯‡æ–‡ç« ä»¥åŠ&lt;a href=&quot;https://firebase.google.com/docs/database/security/&quot;&gt;å®‰å…¨è§„åˆ™æ–‡æ¡£&lt;/a&gt;å…¨æ–‡ã€‚&lt;/p&gt;"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 ç¨‹åº·Â·CHENGKANG
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/index.html">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/cheng-kang">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>
    <script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-75274957-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


<script>
  var wildfireConfig = () => ({
    databaseProvider: 'firebase',
    databaseConfig: {
        apiKey: "AIzaSyA58LRgGkScdEvlJ4UGw5pmq0BI6C_jum0",
        authDomain: "aggregator-d4b86.firebaseapp.com",
        databaseURL: "https://aggregator-d4b86.firebaseio.com",
        projectId: "aggregator-d4b86",
        storageBucket: "aggregator-d4b86.appspot.com",
        messagingSenderId: "293195558013"
    },
    theme: 'dark',
    locale: 'zh-CN',
    defaultAvatarURL: 'https://image.flaticon.com/icons/svg/621/621863.svg'
  })
</script>
<script src="https://unpkg.com/wildfire-dev@0.5.0/dist/wildfire.auto.js"></script>

</body>
</html>
